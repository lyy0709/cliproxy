import{_ as Ne,r as f,H as we,q as E,c as i,n,e as v,b as e,d as Z,s as z,f as y,I as qe,i as ke,t as c,v as x,p,j as Te,C as je,F as O,l as P,E as M,J as C,a as We,z as he,x as ne,G as pe,D as Re,L as de,M as Ee,g as te,k as Ye,w as me,h as Ie,T as He,N as Ze,o as et,O as tt}from"./index-CQyKkE5B.js";const lt={class:"oauth-flow"},st={key:0,class:"oauth-section claude"},ot={class:"auth-method-select"},nt={class:"method-options"},it={key:0,class:"cookie-auth"},at={class:"form-group"},rt={class:"form-label-row"},dt={key:0,class:"count-badge"},ut={key:0,class:"session-key-tip"},pt={key:0,class:"help-section"},vt={key:0,class:"error-banner"},ct=["disabled"],yt={key:1,class:"manual-auth"},ft={class:"auth-steps"},mt={class:"step-card"},kt={class:"step-content"},gt=["disabled"],bt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},xt={key:1,class:"btn-spinner"},ht={key:1,class:"auth-url-container"},wt={class:"url-input-group"},_t=["value"],Ct={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"check"},$t={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Mt={class:"step-card"},At={class:"step-content"},Bt={key:1,class:"oauth-section gemini"},zt={class:"auth-steps"},It={class:"step-card"},Tt={class:"step-content"},Ut=["disabled"],Vt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},St={key:1,class:"btn-spinner"},Lt={key:1,class:"auth-url-container"},Kt={class:"url-input-group"},Ot=["value"],Pt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"check"},Gt={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Dt={class:"step-card"},Ft={class:"step-content"},Rt={key:2,class:"oauth-section openai"},qt={class:"auth-steps"},Wt={class:"step-card"},Et={class:"step-content"},Nt=["disabled"],jt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ht={key:1,class:"btn-spinner"},Jt={key:1,class:"auth-url-container"},Xt={class:"url-input-group"},Qt=["value"],Yt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"check"},Zt={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},el={class:"step-card"},tl={class:"step-content"},ll={class:"oauth-actions"},sl=["disabled"],ol={key:0,class:"btn-spinner"},nl={__name:"OAuthFlow",props:{platform:{type:String,required:!0},proxy:{type:Object,default:null},authMode:{type:String,default:"oauth",validator:ie=>["oauth","cookie"].includes(ie)}},emits:["success","back"],setup(ie,{emit:ee}){const k=ie,V=ee,B=f(!1),J=f(!1),I=f(""),U=f(""),q=f(!1),X=f(""),G=f("manual"),L=f(""),W=f(!1),D=f(""),b=f(!1),g=f({current:0,total:0});we(()=>k.authMode,_=>{_==="cookie"?G.value="cookie":G.value="manual"},{immediate:!0});const N=E(()=>k.platform==="claude"||k.platform==="claude-official"),F=E(()=>L.value.split(`
`).map(_=>_.trim()).filter(_=>_.length>0).length),h=E(()=>I.value&&U.value.trim());we(U,_=>{if(!_||typeof _!="string")return;const a=_.trim();if(!a)return;if((a.startsWith("http://")||a.startsWith("https://"))&&(a.startsWith("http://localhost:45462")||a.startsWith("http://localhost:1455")))try{const H=new URL(a).searchParams.get("code");H&&(U.value=H,M.success("成功提取授权码！"))}catch(A){console.error("Failed to parse URL:",A)}});function j(){return k.platform==="openai-responses"?"openai":k.platform}async function R(){var _,a,w;B.value=!0,I.value="",U.value="",X.value="";try{const A=(_=k.proxy)!=null&&_.enabled?{type:k.proxy.type,host:k.proxy.host,port:parseInt(k.proxy.port),username:k.proxy.username||null,password:k.proxy.password||null}:null,H=await P.generateOAuthUrl(j(),A);I.value=H.data.auth_url,X.value=H.data.session_id,M.success("授权链接已生成")}catch(A){M.error(((w=(a=A.response)==null?void 0:a.data)==null?void 0:w.message)||A.message||"生成授权链接失败")}finally{B.value=!1}}function le(){I.value="",U.value="",X.value="",R()}async function ae(){if(!I.value){M.error("请先生成授权链接");return}try{await navigator.clipboard.writeText(I.value),q.value=!0,M.success("链接已复制"),setTimeout(()=>{q.value=!1},2e3)}catch{const a=document.createElement("input");a.value=I.value,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),q.value=!0,M.success("链接已复制"),setTimeout(()=>{q.value=!1},2e3)}}async function Q(){var _,a,w;if(h.value){J.value=!0;try{const A=(_=k.proxy)!=null&&_.enabled?{type:k.proxy.type,host:k.proxy.host,port:parseInt(k.proxy.port),username:k.proxy.username||null,password:k.proxy.password||null}:null,Y=(await P.exchangeOAuthCode(j(),U.value,X.value,A)).data;V("success",Y)}catch(A){M.error(((w=(a=A.response)==null?void 0:a.data)==null?void 0:w.message)||A.message||"授权失败，请检查授权码是否正确")}finally{J.value=!1}}}async function ge(){var H,Y,ve;const _=L.value.split(`
`).map(K=>K.trim()).filter(K=>K.length>0);if(_.length===0){D.value="请输入至少一个 sessionKey";return}W.value=!0,D.value="",g.value={current:0,total:_.length};const a=(H=k.proxy)!=null&&H.enabled?{type:k.proxy.type,host:k.proxy.host,port:parseInt(k.proxy.port),username:k.proxy.username||null,password:k.proxy.password||null}:null,w=[],A=[];for(let K=0;K<_.length;K++){g.value.current=K+1;try{const ue=await P.oauthByCookie(k.platform,_[K],a);w.push({...ue.data,session_key:_[K]})}catch(ue){A.push({index:K+1,key:_[K].substring(0,20)+"...",error:((ve=(Y=ue.response)==null?void 0:Y.data)==null?void 0:ve.message)||ue.message})}}g.value={current:0,total:0},W.value=!1,w.length>0&&V("success",w),A.length>0&&w.length===0?D.value="全部授权失败，请检查 sessionKey 是否有效":A.length>0&&(D.value=`${A.length} 个授权失败`)}function se(){L.value="",D.value="",W.value=!1,g.value={current:0,total:0},I.value="",U.value="",X.value=""}return(_,a)=>(n(),i("div",lt,[N.value?(n(),i("div",st,[a[33]||(a[33]=Z('<div class="oauth-header" data-v-34397971><div class="platform-icon claude" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm0 18a8 8 0 118-8 8 8 0 01-8 8z" data-v-34397971></path><circle cx="12" cy="12" r="3" data-v-34397971></circle></svg></div><div class="platform-info" data-v-34397971><h4 data-v-34397971>Claude 账户授权</h4></div></div>',1)),e("div",ot,[a[11]||(a[11]=e("label",{class:"method-label"},"选择授权方式",-1)),e("div",nt,[e("label",{class:z(["method-option",{active:G.value==="manual"}])},[y(e("input",{type:"radio","onUpdate:modelValue":a[0]||(a[0]=w=>G.value=w),value:"manual",onChange:se},null,544),[[qe,G.value]]),a[8]||(a[8]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e("path",{d:"M7 11V7a5 5 0 0110 0v4"})],-1)),a[9]||(a[9]=e("span",null,"手动授权",-1))],2),e("label",{class:z(["method-option",{active:G.value==="cookie"}])},[y(e("input",{type:"radio","onUpdate:modelValue":a[1]||(a[1]=w=>G.value=w),value:"cookie",onChange:se},null,544),[[qe,G.value]]),a[10]||(a[10]=Z('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><circle cx="12" cy="12" r="10" data-v-34397971></circle><path d="M8 14s1.5 2 4 2 4-2 4-2" data-v-34397971></path><circle cx="9" cy="9" r="1" fill="currentColor" data-v-34397971></circle><circle cx="15" cy="9" r="1" fill="currentColor" data-v-34397971></circle></svg><span data-v-34397971>SessionKey 自动授权</span>',2))],2)])]),G.value==="cookie"?(n(),i("div",it,[a[22]||(a[22]=Z('<div class="info-banner" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><circle cx="12" cy="12" r="10" data-v-34397971></circle><line x1="12" y1="16" x2="12" y2="12" data-v-34397971></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-34397971></line></svg><span data-v-34397971>使用 claude.ai 的 sessionKey 自动完成 OAuth 授权流程</span></div>',1)),e("div",at,[e("div",rt,[a[13]||(a[13]=Z('<label class="form-label" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z" data-v-34397971></path><path d="M8 14s1.5 2 4 2 4-2 4-2" data-v-34397971></path><circle cx="9" cy="9" r="1" fill="currentColor" data-v-34397971></circle><circle cx="15" cy="9" r="1" fill="currentColor" data-v-34397971></circle></svg> sessionKey </label>',1)),F.value>1?(n(),i("span",dt,c(F.value)+" 个",1)):v("",!0),e("button",{type:"button",class:"help-btn",onClick:a[2]||(a[2]=w=>b.value=!b.value)},[...a[12]||(a[12]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"}),e("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)])])]),y(e("textarea",{"onUpdate:modelValue":a[3]||(a[3]=w=>L.value=w),class:"form-textarea",rows:"3",placeholder:`每行一个 sessionKey，例如：
sk-ant-sid01-xxxxx...
sk-ant-sid01-yyyyy...`},null,512),[[x,L.value]]),F.value>1?(n(),i("div",ut,[a[14]||(a[14]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),p(" 将批量创建 "+c(F.value)+" 个账户 ",1)])):v("",!0)]),ke(je,{name:"slide"},{default:Te(()=>[b.value?(n(),i("div",pt,[...a[15]||(a[15]=[e("h5",null,[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"9",y1:"18",x2:"15",y2:"18"}),e("line",{x1:"10",y1:"22",x2:"14",y2:"22"}),e("path",{d:"M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0018 8 6 6 0 006 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 018.91 14"})]),p(" 如何获取 sessionKey ")],-1),e("ol",null,[e("li",null,[p("在浏览器中登录 "),e("strong",null,"claude.ai")]),e("li",null,[p("按 "),e("kbd",null,"F12"),p(" 打开开发者工具")]),e("li",null,[p("切换到 "),e("strong",null,"Application"),p("（应用）标签页")]),e("li",null,[p("在左侧找到 "),e("strong",null,"Cookies"),p(" → "),e("strong",null,"https://claude.ai")]),e("li",null,[p("找到键为 "),e("strong",null,"sessionKey"),p(" 的那一行")]),e("li",null,[p("复制其 "),e("strong",null,"Value"),p("（值）列的内容")])],-1),e("p",{class:"help-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" sessionKey 通常以 "),e("code",null,"sk-ant-sid01-"),p(" 开头 ")],-1)])])):v("",!0)]),_:1}),D.value?(n(),i("div",vt,[a[16]||(a[16]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),e("span",null,c(D.value),1)])):v("",!0),e("button",{class:"btn btn-primary btn-block",disabled:!L.value.trim()||W.value,onClick:ge},[W.value&&g.value.total>1?(n(),i(O,{key:0},[a[17]||(a[17]=e("span",{class:"btn-spinner"},null,-1)),p(" 正在授权 "+c(g.value.current)+"/"+c(g.value.total)+"... ",1)],64)):W.value?(n(),i(O,{key:1},[a[18]||(a[18]=e("span",{class:"btn-spinner"},null,-1)),a[19]||(a[19]=p(" 正在授权... ",-1))],64)):(n(),i(O,{key:2},[a[20]||(a[20]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})],-1)),a[21]||(a[21]=p(" 开始自动授权 ",-1))],64))],8,ct)])):(n(),i("div",yt,[a[32]||(a[32]=e("p",{class:"auth-desc"},"请按照以下步骤完成 Claude 账户的授权：",-1)),e("div",ft,[e("div",mt,[a[27]||(a[27]=e("div",{class:"step-header"},[e("div",{class:"step-num"},"1"),e("div",{class:"step-title"},"点击下方按钮生成授权链接")],-1)),e("div",kt,[I.value?(n(),i("div",ht,[e("div",wt,[e("input",{type:"text",value:I.value,readonly:"",class:"url-input"},null,8,_t),e("button",{class:"copy-btn",onClick:ae},[q.value?(n(),i("svg",Ct,[...a[24]||(a[24]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(n(),i("svg",$t,[...a[25]||(a[25]=[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),e("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"},null,-1)])]))])]),e("button",{class:"link-btn",onClick:le},[...a[26]||(a[26]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"23 4 23 10 17 10"}),e("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})],-1),p(" 重新生成 ",-1)])])])):(n(),i("button",{key:0,class:"btn btn-primary",disabled:B.value,onClick:R},[B.value?v("",!0):(n(),i("svg",bt,[...a[23]||(a[23]=[e("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"},null,-1),e("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"},null,-1)])])),B.value?(n(),i("span",xt)):v("",!0),p(" "+c(B.value?"生成中...":"生成授权链接"),1)],8,gt))])]),a[31]||(a[31]=Z('<div class="step-card" data-v-34397971><div class="step-header" data-v-34397971><div class="step-num" data-v-34397971>2</div><div class="step-title" data-v-34397971>在浏览器中打开链接并完成授权</div></div><div class="step-content" data-v-34397971><p data-v-34397971>请在新标签页中打开授权链接，登录您的 Claude 账户并授权。</p><div class="warning-banner" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" data-v-34397971></path><line x1="12" y1="9" x2="12" y2="13" data-v-34397971></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-34397971></line></svg><span data-v-34397971><strong data-v-34397971>注意：</strong>如果您设置了代理，请确保浏览器也使用相同的代理访问授权页面。</span></div></div></div>',1)),e("div",Mt,[a[30]||(a[30]=e("div",{class:"step-header"},[e("div",{class:"step-num"},"3"),e("div",{class:"step-title"},"输入 Authorization Code")],-1)),e("div",At,[a[28]||(a[28]=e("p",{class:"step-desc"},[p("授权完成后，页面会显示一个 "),e("strong",null,"Authorization Code"),p("，请将其复制并粘贴到下方输入框：")],-1)),y(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=w=>U.value=w),class:"form-textarea",rows:"3",placeholder:"粘贴从 Claude 页面获取的 Authorization Code..."},null,512),[[x,U.value]]),a[29]||(a[29]=Z('<p class="input-tip" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><circle cx="12" cy="12" r="10" data-v-34397971></circle><line x1="12" y1="16" x2="12" y2="12" data-v-34397971></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-34397971></line></svg> 请粘贴从 Claude 页面复制的 Authorization Code </p>',1))])])])]))])):ie.platform==="gemini"?(n(),i("div",Bt,[a[41]||(a[41]=Z('<div class="oauth-header" data-v-34397971><div class="platform-icon gemini" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><path d="M12 2L2 7l10 5 10-5-10-5z" data-v-34397971></path><path d="M2 17l10 5 10-5" data-v-34397971></path><path d="M2 12l10 5 10-5" data-v-34397971></path></svg></div><div class="platform-info" data-v-34397971><h4 data-v-34397971>Gemini 账户授权</h4></div></div><p class="auth-desc" data-v-34397971>请按照以下步骤完成 Gemini 账户的授权：</p>',2)),e("div",zt,[e("div",It,[a[38]||(a[38]=e("div",{class:"step-header"},[e("div",{class:"step-num"},"1"),e("div",{class:"step-title"},"点击下方按钮生成授权链接")],-1)),e("div",Tt,[I.value?(n(),i("div",Lt,[e("div",Kt,[e("input",{type:"text",value:I.value,readonly:"",class:"url-input"},null,8,Ot),e("button",{class:"copy-btn",onClick:ae},[q.value?(n(),i("svg",Pt,[...a[35]||(a[35]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(n(),i("svg",Gt,[...a[36]||(a[36]=[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),e("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"},null,-1)])]))])]),e("button",{class:"link-btn",onClick:le},[...a[37]||(a[37]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"23 4 23 10 17 10"}),e("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})],-1),p(" 重新生成 ",-1)])])])):(n(),i("button",{key:0,class:"btn btn-primary",disabled:B.value,onClick:R},[B.value?v("",!0):(n(),i("svg",Vt,[...a[34]||(a[34]=[e("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"},null,-1),e("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"},null,-1)])])),B.value?(n(),i("span",St)):v("",!0),p(" "+c(B.value?"生成中...":"生成授权链接"),1)],8,Ut))])]),a[40]||(a[40]=Z('<div class="step-card" data-v-34397971><div class="step-header" data-v-34397971><div class="step-num" data-v-34397971>2</div><div class="step-title" data-v-34397971>在浏览器中打开链接并完成授权</div></div><div class="step-content" data-v-34397971><p data-v-34397971>请在新标签页中打开授权链接，登录您的 Google 账户并授权。</p></div></div>',1)),e("div",Dt,[a[39]||(a[39]=e("div",{class:"step-header"},[e("div",{class:"step-num"},"3"),e("div",{class:"step-title"},"输入 Authorization Code")],-1)),e("div",Ft,[y(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=w=>U.value=w),class:"form-textarea",rows:"3",placeholder:"粘贴从 Gemini 页面获取的 Authorization Code..."},null,512),[[x,U.value]])])])])])):ie.platform==="openai"||ie.platform==="openai-responses"?(n(),i("div",Rt,[a[50]||(a[50]=Z('<div class="oauth-header" data-v-34397971><div class="platform-icon openai" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm0 18a8 8 0 118-8 8 8 0 01-8 8z" data-v-34397971></path><path d="M12 6v6l4 2" data-v-34397971></path></svg></div><div class="platform-info" data-v-34397971><h4 data-v-34397971>OpenAI 账户授权</h4></div></div><p class="auth-desc" data-v-34397971>请按照以下步骤完成 OpenAI 账户的授权：</p>',2)),e("div",qt,[e("div",Wt,[a[46]||(a[46]=e("div",{class:"step-header"},[e("div",{class:"step-num"},"1"),e("div",{class:"step-title"},"点击下方按钮生成授权链接")],-1)),e("div",Et,[I.value?(n(),i("div",Jt,[e("div",Xt,[e("input",{type:"text",value:I.value,readonly:"",class:"url-input"},null,8,Qt),e("button",{class:"copy-btn",onClick:ae},[q.value?(n(),i("svg",Yt,[...a[43]||(a[43]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(n(),i("svg",Zt,[...a[44]||(a[44]=[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),e("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"},null,-1)])]))])]),e("button",{class:"link-btn",onClick:le},[...a[45]||(a[45]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"23 4 23 10 17 10"}),e("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})],-1),p(" 重新生成 ",-1)])])])):(n(),i("button",{key:0,class:"btn btn-primary",disabled:B.value,onClick:R},[B.value?v("",!0):(n(),i("svg",jt,[...a[42]||(a[42]=[e("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"},null,-1),e("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"},null,-1)])])),B.value?(n(),i("span",Ht)):v("",!0),p(" "+c(B.value?"生成中...":"生成授权链接"),1)],8,Nt))])]),a[49]||(a[49]=Z('<div class="step-card" data-v-34397971><div class="step-header" data-v-34397971><div class="step-num" data-v-34397971>2</div><div class="step-title" data-v-34397971>在浏览器中打开链接并完成授权</div></div><div class="step-content" data-v-34397971><p data-v-34397971>请在新标签页中打开授权链接，登录您的 OpenAI 账户并授权。</p><div class="info-banner compact" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><circle cx="12" cy="12" r="10" data-v-34397971></circle><polyline points="12 6 12 12 16 14" data-v-34397971></polyline></svg><div data-v-34397971><strong data-v-34397971>重要提示：</strong>授权后页面可能会加载较长时间，请耐心等待。<br data-v-34397971> 当浏览器地址栏变为 <strong data-v-34397971>http://localhost:1455/...</strong> 开头时，表示授权已完成。 </div></div></div></div>',1)),e("div",el,[a[48]||(a[48]=e("div",{class:"step-header"},[e("div",{class:"step-num"},"3"),e("div",{class:"step-title"},"输入授权链接或 Code")],-1)),e("div",tl,[y(e("textarea",{"onUpdate:modelValue":a[6]||(a[6]=w=>U.value=w),class:"form-textarea",rows:"3",placeholder:`方式1：复制完整的链接（http://localhost:1455/auth/callback?code=...）
方式2：仅复制 code 参数的值
系统会自动识别并提取所需信息`},null,512),[[x,U.value]]),a[47]||(a[47]=Z('<div class="info-banner compact" data-v-34397971><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-34397971><line x1="9" y1="18" x2="15" y2="18" data-v-34397971></line><line x1="10" y1="22" x2="14" y2="22" data-v-34397971></line><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0018 8 6 6 0 006 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 018.91 14" data-v-34397971></path></svg><span data-v-34397971>您可以直接复制整个链接或仅复制 code 参数值，系统会自动识别。</span></div>',1))])])])])):v("",!0),e("div",ll,[e("button",{class:"btn btn-outline",onClick:a[7]||(a[7]=w=>_.$emit("back"))},"上一步"),N.value&&G.value==="cookie"?v("",!0):(n(),i("button",{key:0,class:"btn btn-primary",disabled:!h.value||J.value,onClick:Q},[J.value?(n(),i("span",ol)):v("",!0),p(" "+c(J.value?"验证中...":"完成授权"),1)],8,sl))])]))}},il=Ne(nl,[["__scopeId","data-v-34397971"]]),al={class:"modal-container"},rl={class:"modal-header"},dl={class:"modal-title"},ul={key:0,class:"steps-indicator"},pl={class:"step-num"},vl={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},cl={key:1},yl={class:"modal-body"},fl={key:0,class:"form-step"},ml={class:"form-section"},kl={class:"platform-groups"},gl=["onClick"],bl={class:"platform-info"},xl={key:0,class:"check-badge"},hl={key:0,class:"subplatform-section"},wl={class:"subplatform-grid"},_l=["value"],Cl={class:"sub-info"},$l={class:"sub-name"},Ml={class:"sub-desc"},Al={key:0,class:"check-badge small"},Bl={key:0,class:"form-section"},zl={class:"add-type-grid"},Il={key:0,class:"check-badge small"},Tl={key:0,class:"check-badge small"},Ul={key:0,class:"check-badge small"},Vl={key:0,class:"check-badge small"},Sl={key:0,class:"check-badge small"},Ll={key:0,class:"check-badge small"},Kl={key:0,class:"check-badge small"},Ol={class:"form-section"},Pl={class:"form-grid"},Gl={class:"form-group full"},Dl={class:"form-group full"},Fl={class:"form-group"},Rl={class:"form-group"},ql={class:"form-group"},Wl={class:"form-group"},El={class:"form-group"},Nl={class:"toggle-switch"},jl={key:1,class:"form-section"},Hl={class:"section-title"},Jl={key:0,class:"form-grid"},Xl={class:"form-group full"},Ql={class:"form-group full"},Yl={class:"input-with-toggle"},Zl=["type"],es={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ts={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ls={key:1,class:"form-grid"},ss={class:"form-group full"},os={class:"form-group full"},ns={class:"input-with-toggle"},is=["type"],as={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},rs={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ds={class:"form-group full"},us={key:2,class:"form-grid"},ps={class:"form-group full"},vs={class:"input-with-toggle"},cs=["type"],ys={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},fs={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ms={class:"form-group full"},ks={class:"form-group full"},gs={class:"form-grid"},bs={class:"form-group full"},xs={class:"input-with-toggle"},hs=["type"],ws={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},_s={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Cs={class:"form-grid"},$s={class:"form-group full"},Ms=["value"],As={class:"form-tip"},Bs={key:0,class:"form-group full"},zs=["value"],Is={class:"form-group full"},Ts={class:"input-with-toggle"},Us=["type"],Vs={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ss={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ls={class:"help-card"},Ks={class:"help-steps"},Os={key:5,class:"form-grid"},Ps={class:"form-group full"},Gs={class:"form-group full"},Ds={class:"input-with-toggle"},Fs=["type"],Rs={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},qs={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ws={class:"form-group"},Es={class:"form-group"},Ns={key:6,class:"form-grid"},js={class:"form-group full"},Hs={class:"input-with-toggle"},Js=["type"],Xs={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Qs={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ys={class:"form-group full"},Zs={class:"form-section"},eo={class:"form-group full"},to=["onClick"],lo=["onKeydown"],so={class:"form-section"},oo={class:"form-group full"},no=["value"],io={key:1,class:"form-step"},ao={key:2,class:"form-step"},ro={class:"edit-type-banner"},uo={class:"form-grid"},po={class:"form-group full"},vo={class:"form-group full"},co={class:"form-group"},yo={class:"form-group"},fo={class:"form-group"},mo={class:"form-group"},ko={class:"toggle-switch"},go={key:0,class:"form-section"},bo={class:"form-grid"},xo={class:"form-group full"},ho={class:"form-group full"},wo={class:"input-with-toggle"},_o=["type"],Co={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$o={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Mo={key:1,class:"form-section"},Ao={class:"form-grid"},Bo={class:"form-group full"},zo={class:"form-group full"},Io={class:"input-with-toggle"},To=["type"],Uo={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Vo={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},So={class:"form-group full"},Lo={key:2,class:"form-section"},Ko={class:"form-grid"},Oo={class:"form-group full"},Po={class:"form-group full"},Go={class:"input-with-toggle"},Do=["type"],Fo={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ro={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},qo={class:"form-group"},Wo={class:"form-group"},Eo={key:3,class:"form-section"},No={class:"form-grid"},jo={class:"form-group full"},Ho={class:"form-group full"},Jo={class:"input-with-toggle"},Xo=["type"],Qo={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Yo={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Zo={class:"form-group full"},en={class:"form-section"},tn={class:"form-group full"},ln=["onClick"],sn=["onKeydown"],on={class:"form-group full"},nn=["value"],an={class:"form-section"},rn={class:"form-group full"},dn=["value"],un={class:"modal-footer"},pn=["disabled"],vn={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},cn=["disabled"],yn={key:0,class:"btn-loading"},fn={__name:"AccountForm",props:{modelValue:Boolean,editData:Object},emits:["update:modelValue","success"],setup(ie,{emit:ee}){const k=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("path",{d:"M12 2a10 10 0 1010 10A10 10 0 0012 2zm0 18a8 8 0 118-8 8 8 0 01-8 8z"}),C("circle",{cx:"12",cy:"12",r:"3"})]),V=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("rect",{x:"3",y:"8",width:"18",height:"12",rx:"2"}),C("path",{d:"M12 2v4"}),C("circle",{cx:"8",cy:"14",r:"2"}),C("circle",{cx:"16",cy:"14",r:"2"})]),B=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("circle",{cx:"12",cy:"12",r:"10"}),C("path",{d:"M12 8v8M8 12h8"})]),J=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})]),I=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2"}),C("polyline",{points:"6 9 10 13 6 17"}),C("line",{x1:"14",y1:"17",x2:"18",y2:"17"})]),U=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("path",{d:"M12 4L4 8v8l8 4 8-4V8l-8-4z"}),C("path",{d:"M4 8l8 4 8-4M12 12v8"})]),q=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})]),X=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})]),G=()=>C("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[C("rect",{x:"3",y:"3",width:"8",height:"8"}),C("rect",{x:"13",y:"3",width:"8",height:"8"}),C("rect",{x:"3",y:"13",width:"8",height:"8"}),C("rect",{x:"13",y:"13",width:"8",height:"8"})]),L=ie,W=ee,D=E({get:()=>L.modelValue,set:d=>W("update:modelValue",d)}),b=E(()=>{var d;return!!((d=L.editData)!=null&&d.id)}),g=f(1),N=f(!1),F=f(""),h=f(!1),j=f(!1),R=f(!1),le=f(!1),ae=f(null),Q=f(""),ge=[{key:"claude",name:"Claude",desc:"Anthropic AI",iconComponent:k,gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{key:"openai",name:"OpenAI",desc:"GPT 系列模型",iconComponent:V,gradient:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},{key:"gemini",name:"Gemini",desc:"Google AI",iconComponent:B,gradient:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}],se={claude:[{value:"claude-official",label:"Claude Official",desc:"OAuth 认证",iconComponent:J,color:"#667eea"},{value:"claude-console",label:"Claude Console",desc:"API Key 认证",iconComponent:I,color:"#764ba2"},{value:"bedrock",label:"AWS Bedrock",desc:"AWS 托管服务",iconComponent:U,color:"#ff9900"}],openai:[{value:"openai",label:"OpenAI 三方 API",desc:"API Key 认证",iconComponent:q,color:"#11998e"},{value:"openai-responses",label:"ChatGPT 官方",desc:"OAuth / SessionKey",iconComponent:X,color:"#38ef7d"},{value:"azure-openai",label:"Azure OpenAI",desc:"Azure 托管",iconComponent:G,color:"#0078d4"}],gemini:[{value:"gemini",label:"Gemini",desc:"Google AI Studio",iconComponent:B,color:"#4facfe"}]},_=E(()=>se[F.value]||[]),a=f([]),w=f(!1),A=f([]),H=f(!1),Y=f([]),ve=f(!1),K=E(()=>{if(!l.proxy_id)return null;const d=a.value.find(t=>t.id===l.proxy_id);return d?{enabled:!0,type:d.type,host:d.host,port:d.port,username:d.username||"",password:d.password||""}:null});async function ue(){w.value=!0;try{const d=await P.getEnabledProxyConfigs();a.value=d.items||[]}catch(d){console.error("Failed to load proxies:",d)}finally{w.value=!1}}async function Ue(){H.value=!0;try{const d=await P.getEnabledGateways();A.value=d.items||[]}catch(d){console.error("Failed to load gateways:",d)}finally{H.value=!1}}const _e=E(()=>{if(l.gateway_id&&A.value.length>0){const d=A.value.find(t=>t.id===l.gateway_id);if(d)return d.url.replace(/\/$/,"")+"/backend-api/codex"}return""});async function Ve(){var d;ve.value=!0;try{const t=await P.getModelMappings();Y.value=(((d=t.data)==null?void 0:d.mappings)||[]).filter($=>$.enabled)}catch(t){console.error("Failed to load model mappings:",t)}finally{ve.value=!1}}const be={name:"",type:"",description:"",enabled:!0,priority:50,weight:100,max_concurrency:5,daily_budget:0,accountType:"shared",addType:"oauth",api_key:"",api_url:"",access_token:"",refresh_token:"",session_key:"",organization_id:"",aws_access_key_id:"",aws_secret_access_key:"",aws_region:"us-east-1",azure_endpoint:"",azure_deployment_name:"",azure_api_version:"2024-02-01",allowed_models:"",allowedModelsList:[],model_mapping:"",selectedMappingIds:[],proxy_id:null,gateway_id:null,gateway_url:"",xyrt_refresh_token:"",auth_type:""},l=We({...be}),Se=E(()=>{const d=l.type;return["claude-official","openai-responses","gemini"].includes(d)}),ce=E(()=>{const d=l.type;return!!(["claude-console","bedrock","azure-openai"].includes(d)||(d==="openai"||d==="gemini")&&l.addType==="apikey"||d==="openai-responses"&&(l.addType==="cookie"||l.addType==="xyrt"))}),Le=E(()=>{const d={"claude-console":"Claude Console 配置",bedrock:"AWS Bedrock 配置","azure-openai":"Azure OpenAI 配置",openai:"OpenAI 三方 API 配置","openai-responses":"ChatGPT 官方配置",gemini:"Gemini 配置"};return l.addType==="manual"?"Token 配置":d[l.type]||"平台配置"}),T=E(()=>l.type==="openai-responses"&&l.addType==="cookie"?!1:l.addType==="oauth"||l.addType==="cookie"),Ke=E(()=>{const d=l.type;return["claude-console","openai","gemini"].includes(d)}),Oe=E(()=>!(!l.type||!l.name));function Ce(d){return d==="xyrt"?"xyrt":d==="cookie"?"cookie":d==="oauth"?"oauth":""}we(()=>L.editData,d=>{if(d){if(Object.assign(l,{...be,...d}),d.type==="openai-responses"){let t=Ce(d.auth_type);!t&&d.gateway_url&&(t="xyrt"),t&&(l.addType=t)}if(d.base_url&&(l.api_url=d.base_url),d.allowed_models)try{l.allowedModelsList=d.allowed_models.split(",").map(t=>t.trim()).filter(Boolean)}catch{l.allowedModelsList=[]}else l.allowedModelsList=[];if(d.model_mapping)try{const t=JSON.parse(d.model_mapping);l._rawModelMapping=t,l.selectedMappingIds=[]}catch{l.selectedMappingIds=[]}else l.selectedMappingIds=[];for(const[t,$]of Object.entries(se))if($.some(o=>o.value===d.type)){F.value=t;break}}},{immediate:!0}),we(D,async d=>{if(d&&!b.value&&$e(),d&&(ue(),Ue(),await Ve(),l._rawModelMapping&&Y.value.length>0)){const t=[];for(const[$,o]of Object.entries(l._rawModelMapping)){const oe=Y.value.find(xe=>xe.source_model===$&&xe.target_model===o);oe&&t.push(oe.id)}l.selectedMappingIds=t,delete l._rawModelMapping}});function Pe(d){F.value=d,l.type="",l.allowedModelsList=[],d==="claude"?l.addType="cookie":l.addType="apikey"}we(()=>l.type,d=>{if(d)if(d==="claude-official")l.addType="cookie";else if(d==="openai-responses")if(b.value&&l.auth_type){const t=Ce(l.auth_type);l.addType=t||"oauth"}else l.addType="oauth";else(["claude-console","bedrock","azure-openai"].includes(d)||["openai","gemini"].includes(d))&&(l.addType="apikey")});function $e(){Object.assign(l,{...be}),F.value="",g.value=1,h.value=!1,j.value=!1,R.value=!1,Q.value=""}function ye(){D.value=!1,$e()}function Me(){var d;(d=ae.value)==null||d.focus()}function Ae(){const d=Q.value.trim();d&&!l.allowedModelsList.includes(d)&&l.allowedModelsList.push(d),Q.value=""}function Be(d){const t=l.allowedModelsList.indexOf(d);t>-1&&l.allowedModelsList.splice(t,1)}function ze(){!Q.value&&l.allowedModelsList.length>0&&l.allowedModelsList.pop()}function re(d,t="info"){const $=document.createElement("div");$.className=`toast-message toast-${t}`,$.textContent=d,document.body.appendChild($),setTimeout(()=>{$.classList.add("show")},10),setTimeout(()=>{$.classList.remove("show"),setTimeout(()=>$.remove(),300)},3e3)}async function Ge(){if(!l.name){re("请输入账户名称","warning");return}T.value?g.value=2:await m()}async function r(d){if(Array.isArray(d))for(const t of d)l.access_token=t.access_token,l.refresh_token=t.refresh_token,l.session_key=t.session_key,await s();else l.access_token=d.access_token,l.refresh_token=d.refresh_token,await s()}async function s(){N.value=!0;try{const d=u();await P.createAccount(d),re("创建成功","success"),W("success"),ye()}catch(d){re(d.message||"创建失败","error")}finally{N.value=!1}}async function m(){if(!l.name){re("请输入账户名称","warning");return}N.value=!0;try{const d=u();b.value?(await P.updateAccount(l.id,d),re("更新成功","success")):(await P.createAccount(d),re("创建成功","success")),W("success"),ye()}catch(d){re(d.message||"操作失败","error")}finally{N.value=!1}}function u(){var t,$,o,oe,xe;const d={name:l.name,type:l.type,description:l.description,enabled:l.enabled,priority:l.priority,weight:l.weight,max_concurrency:l.max_concurrency,account_type:l.accountType};if(l.api_key&&(d.api_key=l.api_key),l.api_url&&(d.base_url=l.api_url),l.access_token&&(d.access_token=l.access_token),l.refresh_token&&(d.refresh_token=l.refresh_token),l.session_key&&(d.session_key=l.session_key),l.organization_id&&(d.organization_id=l.organization_id),l.addType==="xyrt"?(d.auth_type="xyrt",l.gateway_id&&(d.gateway_id=l.gateway_id),l.gateway_url&&(d.gateway_url=l.gateway_url),l.xyrt_refresh_token&&(d.xyrt_refresh_token=l.xyrt_refresh_token)):l.addType==="oauth"?d.auth_type="oauth":l.addType==="cookie"&&(d.auth_type="cookie"),l.type==="bedrock"&&(d.aws_access_key=l.aws_access_key_id,d.aws_secret_key=l.aws_secret_access_key,d.aws_region=l.aws_region),l.type==="azure-openai"&&(d.azure_endpoint=l.azure_endpoint,d.azure_deployment_name=l.azure_deployment_name,d.azure_api_version=l.azure_api_version),l.proxy_id?d.proxy_id=l.proxy_id:b.value&&((t=L.editData)!=null&&t.proxy_id)&&(d.clear_proxy=!0),(($=l.allowedModelsList)==null?void 0:$.length)>0?d.allowed_models=l.allowedModelsList.join(","):b.value&&((o=L.editData)!=null&&o.allowed_models)&&(d.clear_allowed_models=!0),((oe=l.selectedMappingIds)==null?void 0:oe.length)>0){const De={};l.selectedMappingIds.forEach(Xe=>{const Fe=Y.value.find(Qe=>Qe.id===Xe);Fe&&(De[Fe.source_model]=Fe.target_model)}),Object.keys(De).length>0&&(d.model_mapping=JSON.stringify(De))}else b.value&&((xe=L.editData)!=null&&xe.model_mapping)&&(d.clear_model_mapping=!0);return d}function fe(d){for(const t of Object.values(se)){const $=t.find(o=>o.value===d);if($)return $.label}return d}function S(d){for(const t of Object.values(se)){const $=t.find(o=>o.value===d);if($)return $.iconComponent}return k}function Je(d){for(const t of Object.values(se)){const $=t.find(o=>o.value===d);if($)return $.color}return"#999"}return(d,t)=>{const $=Ye("router-link");return n(),he(He,{to:"body"},[ke(je,{name:"modal"},{default:Te(()=>[D.value?(n(),i("div",{key:0,class:"modal-overlay",onClick:me(ye,["self"])},[e("div",al,[e("div",rl,[e("h2",dl,c(b.value?"编辑账户":"添加账户"),1),e("button",{class:"modal-close",onClick:ye},[...t[67]||(t[67]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),!b.value&&T.value?(n(),i("div",ul,[e("div",{class:z(["step",{active:g.value>=1,done:g.value>1}])},[e("div",pl,[g.value>1?(n(),i("svg",vl,[...t[68]||(t[68]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(n(),i("span",cl,"1"))]),t[69]||(t[69]=e("span",{class:"step-label"},"基本信息",-1))],2),e("div",{class:z(["step-line",{done:g.value>1}])},null,2),e("div",{class:z(["step",{active:g.value>=2}])},[...t[70]||(t[70]=[e("div",{class:"step-num"},"2",-1),e("span",{class:"step-label"},"授权认证",-1)])],2)])):v("",!0),e("div",yl,[g.value===1&&!b.value?(n(),i("div",fl,[e("div",ml,[t[74]||(t[74]=e("h4",{class:"section-title"},"选择平台",-1)),e("div",kl,[(n(),i(O,null,ne(ge,o=>e("div",{key:o.key,class:z(["platform-card",{selected:F.value===o.key}]),onClick:oe=>Pe(o.key)},[e("div",{class:"platform-icon",style:pe({background:o.gradient})},[(n(),he(Re(o.iconComponent)))],4),e("div",bl,[e("h5",null,c(o.name),1),e("p",null,c(o.desc),1)]),F.value===o.key?(n(),i("div",xl,[...t[71]||(t[71]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],10,gl)),64))]),F.value?(n(),i("div",hl,[t[73]||(t[73]=e("p",{class:"subplatform-label"},"选择具体平台类型：",-1)),e("div",wl,[(n(!0),i(O,null,ne(_.value,o=>(n(),i("label",{key:o.value,class:z(["subplatform-card",{selected:l.type===o.value}])},[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=oe=>l.type=oe),type:"radio",value:o.value,class:"sr-only"},null,8,_l),[[qe,l.type]]),e("div",{class:"sub-icon",style:pe({background:o.color})},[(n(),he(Re(o.iconComponent)))],4),e("div",Cl,[e("span",$l,c(o.label),1),e("span",Ml,c(o.desc),1)]),l.type===o.value?(n(),i("div",Al,[...t[72]||(t[72]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2))),128))])])):v("",!0)]),Se.value?(n(),i("div",Bl,[t[96]||(t[96]=e("h4",{class:"section-title"},"添加方式",-1)),e("div",zl,[l.type==="claude-official"?(n(),i(O,{key:0},[e("div",{class:z(["type-card",{selected:l.addType==="cookie"}]),onClick:t[1]||(t[1]=o=>l.addType="cookie")},[t[76]||(t[76]=e("div",{class:"type-icon cookie"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("circle",{cx:"8",cy:"10",r:"1",fill:"currentColor"}),e("circle",{cx:"15",cy:"8",r:"1",fill:"currentColor"}),e("circle",{cx:"10",cy:"15",r:"1",fill:"currentColor"}),e("circle",{cx:"16",cy:"14",r:"1",fill:"currentColor"})])],-1)),t[77]||(t[77]=e("div",{class:"type-content"},[e("h5",null,"SessionKey 授权"),e("p",null,"使用 Claude.ai 的 sessionKey 自动完成授权")],-1)),l.addType==="cookie"?(n(),i("div",Il,[...t[75]||(t[75]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2),e("div",{class:z(["type-card",{selected:l.addType==="oauth"}]),onClick:t[2]||(t[2]=o=>l.addType="oauth")},[t[79]||(t[79]=e("div",{class:"type-icon oauth"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e("path",{d:"M7 11V7a5 5 0 0110 0v4"})])],-1)),t[80]||(t[80]=e("div",{class:"type-content"},[e("h5",null,"OAuth 手动授权"),e("p",null,"生成授权链接，手动完成授权流程")],-1)),l.addType==="oauth"?(n(),i("div",Tl,[...t[78]||(t[78]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2)],64)):l.type==="openai-responses"?(n(),i(O,{key:1},[e("div",{class:z(["type-card",{selected:l.addType==="oauth"}]),onClick:t[3]||(t[3]=o=>l.addType="oauth")},[t[82]||(t[82]=e("div",{class:"type-icon oauth"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})])],-1)),t[83]||(t[83]=e("div",{class:"type-content"},[e("h5",null,"OAuth 授权"),e("p",null,"通过 OAuth 授权访问 ChatGPT 账户")],-1)),l.addType==="oauth"?(n(),i("div",Ul,[...t[81]||(t[81]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2),e("div",{class:z(["type-card",{selected:l.addType==="cookie"}]),onClick:t[4]||(t[4]=o=>l.addType="cookie")},[t[85]||(t[85]=e("div",{class:"type-icon cookie"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("circle",{cx:"8",cy:"10",r:"1",fill:"currentColor"}),e("circle",{cx:"15",cy:"8",r:"1",fill:"currentColor"})])],-1)),t[86]||(t[86]=e("div",{class:"type-content"},[e("h5",null,"SessionKey 授权"),e("p",null,"使用 ChatGPT 的 SessionKey 直接认证")],-1)),l.addType==="cookie"?(n(),i("div",Vl,[...t[84]||(t[84]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2),e("div",{class:z(["type-card",{selected:l.addType==="xyrt"}]),onClick:t[5]||(t[5]=o=>l.addType="xyrt")},[t[88]||(t[88]=e("div",{class:"type-icon xyrt"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})])],-1)),t[89]||(t[89]=e("div",{class:"type-content"},[e("h5",null,"xyrt 授权"),e("p",null,"使用 xyhelper 的 refresh_token 通过网关认证")],-1)),l.addType==="xyrt"?(n(),i("div",Sl,[...t[87]||(t[87]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2)],64)):l.type==="gemini"?(n(),i(O,{key:2},[e("div",{class:z(["type-card",{selected:l.addType==="apikey"}]),onClick:t[6]||(t[6]=o=>l.addType="apikey")},[t[91]||(t[91]=e("div",{class:"type-icon apikey"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})])],-1)),t[92]||(t[92]=e("div",{class:"type-content"},[e("h5",null,"API Key"),e("p",null,"使用 Gemini API Key 直接连接")],-1)),l.addType==="apikey"?(n(),i("div",Ll,[...t[90]||(t[90]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2),e("div",{class:z(["type-card",{selected:l.addType==="oauth"}]),onClick:t[7]||(t[7]=o=>l.addType="oauth")},[t[94]||(t[94]=e("div",{class:"type-icon oauth"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})])],-1)),t[95]||(t[95]=e("div",{class:"type-content"},[e("h5",null,"OAuth 授权"),e("p",null,"通过 Google OAuth 授权访问")],-1)),l.addType==="oauth"?(n(),i("div",Kl,[...t[93]||(t[93]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):v("",!0)],2)],64)):v("",!0)])])):v("",!0),e("div",Ol,[t[106]||(t[106]=e("h4",{class:"section-title"},"基本信息",-1)),e("div",Pl,[e("div",Gl,[t[97]||(t[97]=e("label",{class:"form-label required"},"账户名称",-1)),y(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.name=o),type:"text",class:"form-input",placeholder:"为账户设置一个易识别的名称"},null,512),[[x,l.name]])]),e("div",Dl,[t[98]||(t[98]=e("label",{class:"form-label"},"描述（可选）",-1)),y(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.description=o),class:"form-textarea",rows:"2",placeholder:"账户用途说明..."},null,512),[[x,l.description]])]),e("div",Fl,[t[100]||(t[100]=e("label",{class:"form-label"},"账户类型",-1)),y(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>l.accountType=o),class:"form-select"},[...t[99]||(t[99]=[e("option",{value:"shared"},"共享账户",-1),e("option",{value:"dedicated"},"专属账户",-1)])],512),[[de,l.accountType]])]),e("div",Rl,[t[101]||(t[101]=e("label",{class:"form-label"},"优先级",-1)),y(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>l.priority=o),type:"number",min:"1",max:"100",class:"form-input"},null,512),[[x,l.priority,void 0,{number:!0}]])]),e("div",ql,[t[102]||(t[102]=e("label",{class:"form-label"},"最大并发",-1)),y(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>l.max_concurrency=o),type:"number",min:"1",max:"100",class:"form-input"},null,512),[[x,l.max_concurrency,void 0,{number:!0}]])]),e("div",Wl,[t[103]||(t[103]=e("label",{class:"form-label"},"每日预算($)",-1)),y(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>l.daily_budget=o),type:"number",min:"0",max:"10000",step:"0.01",class:"form-input"},null,512),[[x,l.daily_budget,void 0,{number:!0}]])]),e("div",El,[t[105]||(t[105]=e("label",{class:"form-label"},"启用",-1)),e("label",Nl,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=o=>l.enabled=o)},null,512),[[Ee,l.enabled]]),t[104]||(t[104]=e("span",{class:"toggle-slider"},null,-1))])])])]),ce.value?(n(),i("div",jl,[e("h4",Hl,c(Le.value),1),l.type==="claude-console"?(n(),i("div",Jl,[e("div",Xl,[t[107]||(t[107]=e("label",{class:"form-label required"},"API URL",-1)),y(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>l.api_url=o),type:"text",class:"form-input",placeholder:"例如：https://api.anthropic.com"},null,512),[[x,l.api_url]])]),e("div",Ql,[t[110]||(t[110]=e("label",{class:"form-label required"},"API Key",-1)),e("div",Yl,[y(e("input",{"onUpdate:modelValue":t[16]||(t[16]=o=>l.api_key=o),type:h.value?"text":"password",class:"form-input",placeholder:"sk-ant-api03-..."},null,8,Zl),[[te,l.api_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[17]||(t[17]=o=>h.value=!h.value)},[h.value?(n(),i("svg",es,[...t[108]||(t[108]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",ts,[...t[109]||(t[109]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])])])):v("",!0),l.type==="bedrock"?(n(),i("div",ls,[e("div",ss,[t[111]||(t[111]=e("label",{class:"form-label required"},"AWS Access Key ID",-1)),y(e("input",{"onUpdate:modelValue":t[18]||(t[18]=o=>l.aws_access_key_id=o),type:"text",class:"form-input",placeholder:"请输入 AWS Access Key ID"},null,512),[[x,l.aws_access_key_id]])]),e("div",os,[t[114]||(t[114]=e("label",{class:"form-label required"},"AWS Secret Access Key",-1)),e("div",ns,[y(e("input",{"onUpdate:modelValue":t[19]||(t[19]=o=>l.aws_secret_access_key=o),type:j.value?"text":"password",class:"form-input",placeholder:"请输入 AWS Secret Access Key"},null,8,is),[[te,l.aws_secret_access_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[20]||(t[20]=o=>j.value=!j.value)},[j.value?(n(),i("svg",as,[...t[112]||(t[112]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",rs,[...t[113]||(t[113]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),e("div",ds,[t[116]||(t[116]=e("label",{class:"form-label required"},"AWS Region",-1)),y(e("select",{"onUpdate:modelValue":t[21]||(t[21]=o=>l.aws_region=o),class:"form-select"},[...t[115]||(t[115]=[e("option",{value:"us-east-1"},"us-east-1 (美国东部)",-1),e("option",{value:"us-west-2"},"us-west-2 (美国西部)",-1),e("option",{value:"eu-west-1"},"eu-west-1 (欧洲爱尔兰)",-1),e("option",{value:"ap-northeast-1"},"ap-northeast-1 (东京)",-1),e("option",{value:"ap-southeast-1"},"ap-southeast-1 (新加坡)",-1)])],512),[[de,l.aws_region]])])])):v("",!0),l.type==="openai"&&l.addType==="apikey"?(n(),i("div",us,[e("div",ps,[t[119]||(t[119]=e("label",{class:"form-label required"},[e("svg",{class:"label-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})]),p(" API Key ")],-1)),e("div",vs,[y(e("input",{"onUpdate:modelValue":t[22]||(t[22]=o=>l.api_key=o),type:h.value?"text":"password",class:"form-input",placeholder:"sk-..."},null,8,cs),[[te,l.api_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[23]||(t[23]=o=>h.value=!h.value)},[h.value?(n(),i("svg",ys,[...t[117]||(t[117]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",fs,[...t[118]||(t[118]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),t[120]||(t[120]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" 在 "),e("a",{href:"https://platform.openai.com/api-keys",target:"_blank"},"OpenAI Platform"),p(" 获取 API Key ")],-1))]),e("div",ms,[t[121]||(t[121]=e("label",{class:"form-label"},"组织 ID（可选）",-1)),y(e("input",{"onUpdate:modelValue":t[24]||(t[24]=o=>l.organization_id=o),type:"text",class:"form-input",placeholder:"API: org-xxx / Team: 其他格式"},null,512),[[x,l.organization_id]]),t[122]||(t[122]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" API 账户以 org- 开头；Team/Enterprise 账户为其他格式 ")],-1))]),e("div",ks,[t[123]||(t[123]=e("label",{class:"form-label"},"API Base URL（可选）",-1)),y(e("input",{"onUpdate:modelValue":t[25]||(t[25]=o=>l.api_url=o),type:"text",class:"form-input",placeholder:"默认: https://api.openai.com/v1"},null,512),[[x,l.api_url]]),t[124]||(t[124]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" 如果使用代理或自定义端点，请填写完整 URL ")],-1))])])):v("",!0),l.type==="openai-responses"&&l.addType==="cookie"?(n(),i(O,{key:3},[e("div",gs,[e("div",bs,[t[127]||(t[127]=e("label",{class:"form-label required"},[e("svg",{class:"label-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("circle",{cx:"8",cy:"10",r:"1",fill:"currentColor"}),e("circle",{cx:"15",cy:"8",r:"1",fill:"currentColor"})]),p(" SessionKey (Access Token) ")],-1)),e("div",xs,[y(e("input",{"onUpdate:modelValue":t[26]||(t[26]=o=>l.session_key=o),type:R.value?"text":"password",class:"form-input",placeholder:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."},null,8,hs),[[te,l.session_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[27]||(t[27]=o=>R.value=!R.value)},[R.value?(n(),i("svg",ws,[...t[125]||(t[125]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",_s,[...t[126]||(t[126]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])])]),t[128]||(t[128]=e("div",{class:"help-card"},[e("div",{class:"help-header"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),e("span",null,"如何获取 SessionKey")]),e("ol",{class:"help-steps"},[e("li",null,[p("在浏览器中登录 "),e("a",{href:"https://chatgpt.com",target:"_blank"},"chatgpt.com")]),e("li",null,[p("按 "),e("kbd",null,"F12"),p(" 打开开发者工具，切换到 "),e("strong",null,"Network"),p(" 标签")]),e("li",null,[p("刷新页面，找到任意 API 请求（如 "),e("code",null,"conversations"),p("）")]),e("li",null,[p("在请求头中找到 "),e("strong",null,"Authorization: Bearer xxx")]),e("li",null,[p("复制 "),e("strong",null,"Bearer"),p(" 后面的完整 token")])]),e("p",{class:"help-note"},[p("SessionKey 通常以 "),e("code",null,"eyJhbGciOiJSUzI1NiI"),p(" 开头，有效期约 7 天")])],-1))],64)):v("",!0),l.type==="openai-responses"&&l.addType==="xyrt"?(n(),i(O,{key:4},[e("div",Cs,[e("div",$s,[t[133]||(t[133]=e("label",{class:"form-label required"},[e("svg",{class:"label-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e("path",{d:"M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"})]),p(" 选择网关 ")],-1)),y(e("select",{"onUpdate:modelValue":t[28]||(t[28]=o=>l.gateway_id=o),class:"form-select"},[t[129]||(t[129]=e("option",{value:null,disabled:""},"请选择网关",-1)),(n(!0),i(O,null,ne(A.value,o=>(n(),i("option",{key:o.id,value:o.id},c(o.name)+" ("+c(o.url)+") ",9,Ms))),128))],512),[[de,l.gateway_id]]),e("p",As,[t[131]||(t[131]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),t[132]||(t[132]=p(" 网关用于替换 chatgpt.com，请求将发送到 网关/backend-api/codex ",-1)),ke($,{to:"/admin/gateways",class:"tip-link"},{default:Te(()=>[...t[130]||(t[130]=[p("管理网关",-1)])]),_:1})])]),_e.value?(n(),i("div",Bs,[t[134]||(t[134]=e("label",{class:"form-label"},[e("svg",{class:"label-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"}),e("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"})]),p(" Base URL (自动生成) ")],-1)),e("input",{value:_e.value,type:"text",class:"form-input readonly",readonly:""},null,8,zs)])):v("",!0),e("div",Is,[t[137]||(t[137]=e("label",{class:"form-label required"},[e("svg",{class:"label-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4"})]),p(" xyhelper Refresh Token ")],-1)),e("div",Ts,[y(e("input",{"onUpdate:modelValue":t[29]||(t[29]=o=>l.xyrt_refresh_token=o),type:le.value?"text":"password",class:"form-input",placeholder:"xyhelpertoken..."},null,8,Us),[[te,l.xyrt_refresh_token]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[30]||(t[30]=o=>le.value=!le.value)},[le.value?(n(),i("svg",Vs,[...t[135]||(t[135]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",Ss,[...t[136]||(t[136]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),t[138]||(t[138]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" xyhelper 提供的 refresh_token，以 "),e("code",null,"xyhelpertoken"),p(" 开头 ")],-1))])]),e("div",Ls,[t[145]||(t[145]=e("div",{class:"help-header"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),e("span",null,"xyrt 授权说明")],-1)),e("ol",Ks,[e("li",null,[t[140]||(t[140]=p("先在",-1)),ke($,{to:"/admin/gateways"},{default:Te(()=>[...t[139]||(t[139]=[p("网关管理",-1)])]),_:1}),t[141]||(t[141]=p("中添加网关",-1))]),t[142]||(t[142]=e("li",null,"从 xyhelper 服务获取 refresh_token",-1)),t[143]||(t[143]=e("li",null,"系统创建后立即刷新获取 AccessToken",-1)),t[144]||(t[144]=e("li",null,"Team/K12 账户会自动获取组织 ID",-1))]),t[146]||(t[146]=e("p",{class:"help-note"},[p("xyrt refresh_token 以 "),e("code",null,"xyhelpertoken"),p(" 开头")],-1))])],64)):v("",!0),l.type==="azure-openai"?(n(),i("div",Os,[e("div",Ps,[t[147]||(t[147]=e("label",{class:"form-label required"},"Azure Endpoint",-1)),y(e("input",{"onUpdate:modelValue":t[31]||(t[31]=o=>l.azure_endpoint=o),type:"text",class:"form-input",placeholder:"https://your-resource.openai.azure.com"},null,512),[[x,l.azure_endpoint]])]),e("div",Gs,[t[150]||(t[150]=e("label",{class:"form-label required"},"API Key",-1)),e("div",Ds,[y(e("input",{"onUpdate:modelValue":t[32]||(t[32]=o=>l.api_key=o),type:h.value?"text":"password",class:"form-input",placeholder:"Azure API Key"},null,8,Fs),[[te,l.api_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[33]||(t[33]=o=>h.value=!h.value)},[h.value?(n(),i("svg",Rs,[...t[148]||(t[148]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",qs,[...t[149]||(t[149]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),e("div",Ws,[t[151]||(t[151]=e("label",{class:"form-label required"},"部署名称",-1)),y(e("input",{"onUpdate:modelValue":t[34]||(t[34]=o=>l.azure_deployment_name=o),type:"text",class:"form-input",placeholder:"gpt-4"},null,512),[[x,l.azure_deployment_name]])]),e("div",Es,[t[152]||(t[152]=e("label",{class:"form-label"},"API 版本",-1)),y(e("input",{"onUpdate:modelValue":t[35]||(t[35]=o=>l.azure_api_version=o),type:"text",class:"form-input",placeholder:"2024-02-01"},null,512),[[x,l.azure_api_version]])])])):v("",!0),l.type==="gemini"&&l.addType==="apikey"?(n(),i("div",Ns,[e("div",js,[t[155]||(t[155]=e("label",{class:"form-label required"},[e("svg",{class:"label-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})]),p(" API Key ")],-1)),e("div",Hs,[y(e("input",{"onUpdate:modelValue":t[36]||(t[36]=o=>l.api_key=o),type:h.value?"text":"password",class:"form-input",placeholder:"Gemini API Key"},null,8,Js),[[te,l.api_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[37]||(t[37]=o=>h.value=!h.value)},[h.value?(n(),i("svg",Xs,[...t[153]||(t[153]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",Qs,[...t[154]||(t[154]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),t[156]||(t[156]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" 在 "),e("a",{href:"https://aistudio.google.com/apikey",target:"_blank"},"Google AI Studio"),p(" 获取 API Key ")],-1))]),e("div",Ys,[t[157]||(t[157]=e("label",{class:"form-label"},"API Base URL（可选）",-1)),y(e("input",{"onUpdate:modelValue":t[38]||(t[38]=o=>l.api_url=o),type:"text",class:"form-input",placeholder:"默认: https://generativelanguage.googleapis.com/v1beta"},null,512),[[x,l.api_url]])])])):v("",!0)])):v("",!0),e("div",Zs,[t[160]||(t[160]=e("h4",{class:"section-title"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"12,2 2,7 12,12 22,7"}),e("polyline",{points:"2,17 12,22 22,17"}),e("polyline",{points:"2,12 12,17 22,12"})]),p(" 模型配置（可选） ")],-1)),e("div",eo,[t[158]||(t[158]=e("label",{class:"form-label"},"允许的模型",-1)),e("div",{class:"tags-input",onClick:Me},[(n(!0),i(O,null,ne(l.allowedModelsList,o=>(n(),i("span",{key:o,class:"tag"},[p(c(o)+" ",1),e("button",{type:"button",class:"tag-remove",onClick:me(oe=>Be(o),["stop"])},"×",8,to)]))),128)),y(e("input",{ref_key:"modelInputRef",ref:ae,"onUpdate:modelValue":t[39]||(t[39]=o=>Q.value=o),type:"text",class:"tag-input",placeholder:"输入模型名称后按回车添加",onKeydown:[Ie(me(Ae,["prevent"]),["enter"]),Ie(ze,["delete"])]},null,40,lo),[[x,Q.value]])]),t[159]||(t[159]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" 留空表示允许所有模型，可手动输入自定义模型名 ")],-1))])]),e("div",so,[t[164]||(t[164]=e("h4",{class:"section-title"},"代理配置",-1)),e("div",oo,[t[162]||(t[162]=e("label",{class:"form-label"},"选择代理",-1)),y(e("select",{"onUpdate:modelValue":t[40]||(t[40]=o=>l.proxy_id=o),class:"form-select"},[t[161]||(t[161]=e("option",{value:null},"直连（不使用代理）",-1)),(n(!0),i(O,null,ne(a.value,o=>(n(),i("option",{key:o.id,value:o.id},c(o.name)+" ("+c(o.type)+"://"+c(o.host)+":"+c(o.port)+") ",9,no))),128))],512),[[de,l.proxy_id]]),t[163]||(t[163]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" 留空表示直连，选择代理后将通过该代理访问目标服务 ")],-1))])])])):v("",!0),g.value===2?(n(),i("div",io,[ke(il,{platform:l.type,proxy:K.value,"auth-mode":l.addType,onSuccess:r,onBack:t[41]||(t[41]=o=>g.value=1)},null,8,["platform","proxy","auth-mode"])])):v("",!0),b.value?(n(),i("div",ao,[e("div",ro,[e("div",{class:"type-badge",style:pe({background:Je(l.type)})},[(n(),he(Re(S(l.type))))],4),e("span",null,c(fe(l.type)),1)]),e("div",uo,[e("div",po,[t[165]||(t[165]=e("label",{class:"form-label required"},"账户名称",-1)),y(e("input",{"onUpdate:modelValue":t[42]||(t[42]=o=>l.name=o),type:"text",class:"form-input",placeholder:"账户名称"},null,512),[[x,l.name]])]),e("div",vo,[t[166]||(t[166]=e("label",{class:"form-label"},"描述（可选）",-1)),y(e("textarea",{"onUpdate:modelValue":t[43]||(t[43]=o=>l.description=o),class:"form-textarea",rows:"2",placeholder:"账户用途说明..."},null,512),[[x,l.description]])]),e("div",co,[t[167]||(t[167]=e("label",{class:"form-label"},"优先级",-1)),y(e("input",{"onUpdate:modelValue":t[44]||(t[44]=o=>l.priority=o),type:"number",min:"1",max:"100",class:"form-input"},null,512),[[x,l.priority,void 0,{number:!0}]])]),e("div",yo,[t[168]||(t[168]=e("label",{class:"form-label"},"权重",-1)),y(e("input",{"onUpdate:modelValue":t[45]||(t[45]=o=>l.weight=o),type:"number",min:"1",max:"1000",class:"form-input"},null,512),[[x,l.weight,void 0,{number:!0}]])]),e("div",fo,[t[169]||(t[169]=e("label",{class:"form-label"},"最大并发",-1)),y(e("input",{"onUpdate:modelValue":t[46]||(t[46]=o=>l.max_concurrency=o),type:"number",min:"1",max:"100",class:"form-input"},null,512),[[x,l.max_concurrency,void 0,{number:!0}]])]),e("div",mo,[t[171]||(t[171]=e("label",{class:"form-label"},"启用",-1)),e("label",ko,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[47]||(t[47]=o=>l.enabled=o)},null,512),[[Ee,l.enabled]]),t[170]||(t[170]=e("span",{class:"toggle-slider"},null,-1))])])]),Ke.value?(n(),i("div",go,[t[178]||(t[178]=e("h4",{class:"section-title"},"API 配置",-1)),e("div",bo,[e("div",xo,[t[172]||(t[172]=e("label",{class:"form-label"},"API URL",-1)),y(e("input",{"onUpdate:modelValue":t[48]||(t[48]=o=>l.api_url=o),type:"text",class:"form-input",placeholder:"API Base URL"},null,512),[[x,l.api_url]]),t[173]||(t[173]=e("p",{class:"form-tip"},"留空使用默认地址",-1))]),e("div",ho,[t[176]||(t[176]=e("label",{class:"form-label"},"API Key",-1)),e("div",wo,[y(e("input",{"onUpdate:modelValue":t[49]||(t[49]=o=>l.api_key=o),type:h.value?"text":"password",class:"form-input",placeholder:"API Key"},null,8,_o),[[te,l.api_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[50]||(t[50]=o=>h.value=!h.value)},[h.value?(n(),i("svg",Co,[...t[174]||(t[174]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",$o,[...t[175]||(t[175]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),t[177]||(t[177]=e("p",{class:"form-tip"},"留空保持原有 Key 不变",-1))])])])):v("",!0),l.type==="bedrock"?(n(),i("div",Mo,[t[185]||(t[185]=e("h4",{class:"section-title"},"AWS Bedrock 配置",-1)),e("div",Ao,[e("div",Bo,[t[179]||(t[179]=e("label",{class:"form-label"},"AWS Access Key ID",-1)),y(e("input",{"onUpdate:modelValue":t[51]||(t[51]=o=>l.aws_access_key_id=o),type:"text",class:"form-input",placeholder:"请输入 AWS Access Key ID"},null,512),[[x,l.aws_access_key_id]])]),e("div",zo,[t[182]||(t[182]=e("label",{class:"form-label"},"AWS Secret Access Key",-1)),e("div",Io,[y(e("input",{"onUpdate:modelValue":t[52]||(t[52]=o=>l.aws_secret_access_key=o),type:j.value?"text":"password",class:"form-input",placeholder:"请输入 AWS Secret Access Key（留空保持不变）"},null,8,To),[[te,l.aws_secret_access_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[53]||(t[53]=o=>j.value=!j.value)},[j.value?(n(),i("svg",Uo,[...t[180]||(t[180]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",Vo,[...t[181]||(t[181]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),e("div",So,[t[184]||(t[184]=e("label",{class:"form-label"},"AWS Region",-1)),y(e("select",{"onUpdate:modelValue":t[54]||(t[54]=o=>l.aws_region=o),class:"form-select"},[...t[183]||(t[183]=[e("option",{value:"us-east-1"},"us-east-1 (美国东部)",-1),e("option",{value:"us-west-2"},"us-west-2 (美国西部)",-1),e("option",{value:"eu-west-1"},"eu-west-1 (欧洲爱尔兰)",-1),e("option",{value:"ap-northeast-1"},"ap-northeast-1 (东京)",-1),e("option",{value:"ap-southeast-1"},"ap-southeast-1 (新加坡)",-1)])],512),[[de,l.aws_region]])])])])):v("",!0),l.type==="azure-openai"?(n(),i("div",Lo,[t[192]||(t[192]=e("h4",{class:"section-title"},"Azure OpenAI 配置",-1)),e("div",Ko,[e("div",Oo,[t[186]||(t[186]=e("label",{class:"form-label"},"Azure Endpoint",-1)),y(e("input",{"onUpdate:modelValue":t[55]||(t[55]=o=>l.azure_endpoint=o),type:"text",class:"form-input",placeholder:"https://your-resource.openai.azure.com"},null,512),[[x,l.azure_endpoint]])]),e("div",Po,[t[189]||(t[189]=e("label",{class:"form-label"},"API Key",-1)),e("div",Go,[y(e("input",{"onUpdate:modelValue":t[56]||(t[56]=o=>l.api_key=o),type:h.value?"text":"password",class:"form-input",placeholder:"Azure API Key（留空保持不变）"},null,8,Do),[[te,l.api_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[57]||(t[57]=o=>h.value=!h.value)},[h.value?(n(),i("svg",Fo,[...t[187]||(t[187]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",Ro,[...t[188]||(t[188]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),e("div",qo,[t[190]||(t[190]=e("label",{class:"form-label"},"部署名称",-1)),y(e("input",{"onUpdate:modelValue":t[58]||(t[58]=o=>l.azure_deployment_name=o),type:"text",class:"form-input",placeholder:"gpt-4"},null,512),[[x,l.azure_deployment_name]])]),e("div",Wo,[t[191]||(t[191]=e("label",{class:"form-label"},"API 版本",-1)),y(e("input",{"onUpdate:modelValue":t[59]||(t[59]=o=>l.azure_api_version=o),type:"text",class:"form-input",placeholder:"2024-02-01"},null,512),[[x,l.azure_api_version]])])])])):v("",!0),l.type==="openai-responses"?(n(),i("div",Eo,[t[201]||(t[201]=e("h4",{class:"section-title"},"ChatGPT 官方配置",-1)),e("div",No,[e("div",jo,[t[193]||(t[193]=e("label",{class:"form-label"},"Base URL",-1)),y(e("input",{"onUpdate:modelValue":t[60]||(t[60]=o=>l.api_url=o),type:"text",class:"form-input",placeholder:"默认: https://chatgpt.com/backend-api/codex"},null,512),[[x,l.api_url]]),t[194]||(t[194]=e("p",{class:"form-tip"},"留空使用默认地址",-1))]),e("div",Ho,[t[197]||(t[197]=e("label",{class:"form-label"},"SessionKey (Access Token)",-1)),e("div",Jo,[y(e("input",{"onUpdate:modelValue":t[61]||(t[61]=o=>l.session_key=o),type:R.value?"text":"password",class:"form-input",placeholder:"eyJhbGciOiJSUzI1NiI...（留空保持不变）"},null,8,Xo),[[te,l.session_key]]),e("button",{type:"button",class:"toggle-visibility",onClick:t[62]||(t[62]=o=>R.value=!R.value)},[R.value?(n(),i("svg",Qo,[...t[195]||(t[195]=[e("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"},null,-1),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(n(),i("svg",Yo,[...t[196]||(t[196]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),t[198]||(t[198]=e("p",{class:"form-tip"},"留空保持原有 SessionKey 不变",-1))]),e("div",Zo,[t[199]||(t[199]=e("label",{class:"form-label"},"Organization ID（可选）",-1)),y(e("input",{"onUpdate:modelValue":t[63]||(t[63]=o=>l.organization_id=o),type:"text",class:"form-input",placeholder:"Team/Plus 账户所需的组织 ID"},null,512),[[x,l.organization_id]]),t[200]||(t[200]=e("p",{class:"form-tip"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),p(" Team 账户必填；从 ChatGPT 请求头获取（不是 org- 格式） ")],-1))])])])):v("",!0),e("div",en,[t[206]||(t[206]=e("h4",{class:"section-title"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"12,2 2,7 12,12 22,7"}),e("polyline",{points:"2,17 12,22 22,17"}),e("polyline",{points:"2,12 12,17 22,12"})]),p(" 模型配置 ")],-1)),e("div",tn,[t[202]||(t[202]=e("label",{class:"form-label"},"允许的模型",-1)),e("div",{class:"tags-input",onClick:Me},[(n(!0),i(O,null,ne(l.allowedModelsList,o=>(n(),i("span",{key:o,class:"tag"},[p(c(o)+" ",1),e("button",{type:"button",class:"tag-remove",onClick:me(oe=>Be(o),["stop"])},"×",8,ln)]))),128)),y(e("input",{ref_key:"modelInputRef",ref:ae,"onUpdate:modelValue":t[64]||(t[64]=o=>Q.value=o),type:"text",class:"tag-input",placeholder:"输入模型名称后按回车添加",onKeydown:[Ie(me(Ae,["prevent"]),["enter"]),Ie(ze,["delete"])]},null,40,sn),[[x,Q.value]])]),t[203]||(t[203]=e("p",{class:"form-tip"},"留空表示允许所有模型，可手动输入自定义模型名",-1))]),e("div",on,[t[204]||(t[204]=e("label",{class:"form-label"},"模型映射（可选）",-1)),y(e("select",{"onUpdate:modelValue":t[65]||(t[65]=o=>l.selectedMappingIds=o),multiple:"",class:"form-select multi"},[(n(!0),i(O,null,ne(Y.value,o=>(n(),i("option",{key:o.id,value:o.id},c(o.source_model)+" → "+c(o.target_model),9,nn))),128))],512),[[de,l.selectedMappingIds]]),t[205]||(t[205]=e("p",{class:"form-tip"},"从全局模型映射中选择要应用的规则（按住 Ctrl/Cmd 多选）",-1))])]),e("div",an,[t[210]||(t[210]=e("h4",{class:"section-title"},"代理配置",-1)),e("div",rn,[t[208]||(t[208]=e("label",{class:"form-label"},"选择代理",-1)),y(e("select",{"onUpdate:modelValue":t[66]||(t[66]=o=>l.proxy_id=o),class:"form-select"},[t[207]||(t[207]=e("option",{value:null},"直连（不使用代理）",-1)),(n(!0),i(O,null,ne(a.value,o=>(n(),i("option",{key:o.id,value:o.id},c(o.name)+" ("+c(o.type)+"://"+c(o.host)+":"+c(o.port)+") ",9,dn))),128))],512),[[de,l.proxy_id]]),t[209]||(t[209]=e("p",{class:"form-tip"},"留空表示直连，选择代理后将通过该代理访问目标服务",-1))])])])):v("",!0)]),e("div",un,[e("button",{type:"button",class:"btn btn-secondary",onClick:ye},"取消"),!b.value&&g.value===1?(n(),i("button",{key:0,type:"button",class:"btn btn-primary",disabled:!Oe.value,onClick:Ge},[p(c(T.value?"下一步":"创建账户")+" ",1),T.value?(n(),i("svg",vn,[...t[211]||(t[211]=[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1),e("polyline",{points:"12 5 19 12 12 19"},null,-1)])])):v("",!0)],8,pn)):v("",!0),b.value?(n(),i("button",{key:1,type:"button",class:"btn btn-primary",disabled:N.value,onClick:m},[N.value?(n(),i("span",yn)):v("",!0),p(" "+c(N.value?"保存中...":"保存修改"),1)],8,cn)):v("",!0)])])])):v("",!0)]),_:1})])}}},mn=Ne(fn,[["__scopeId","data-v-9f32fe5a"]]),kn={class:"accounts-page"},gn={class:"page-header"},bn={class:"header-actions"},xn=["disabled"],hn=["disabled"],wn={class:"platform-stats"},_n=["onClick"],Cn={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$n={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Mn={key:2,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},An={class:"stat-info"},Bn={class:"stat-numbers"},zn={class:"total"},In={class:"valid"},Tn={class:"filter-bar"},Un={class:"filter-left"},Vn={class:"search-box"},Sn={class:"filter-right"},Ln={key:0,class:"filter-tag"},Kn={class:"table-card"},On={class:"table-container"},Pn={class:"data-table"},Gn={class:"col-checkbox"},Dn=["checked"],Fn={key:0},Rn={class:"col-checkbox"},qn=["checked","onChange"],Wn={class:"row-index"},En={class:"col-account"},Nn={class:"account-cell"},jn={class:"account-info"},Hn={class:"account-name"},Jn={class:"account-type"},Xn={class:"status-cell"},Qn={key:0,class:"status-detail"},Yn={key:1,class:"status-detail warning"},Zn={key:0,class:"usage-bars"},ei={key:0,class:"usage-bar-item"},ti={class:"usage-bar-label"},li={class:"label-value"},si={class:"usage-bar-track"},oi={key:1,class:"usage-bar-item"},ni={class:"usage-bar-label"},ii={class:"label-value"},ai={class:"usage-bar-track"},ri={key:1,class:"usage-bars"},di={class:"usage-bar-item"},ui={class:"usage-bar-label"},pi={class:"label-value"},vi={class:"usage-bar-track"},ci={key:2,class:"usage-stats"},yi={class:"usage-stat"},fi={class:"usage-stat"},mi={key:3,class:"no-data"},ki={class:"col-center"},gi={class:"toggle-switch"},bi=["onUpdate:modelValue","onChange"],xi={class:"col-center"},hi={class:"badge badge-info"},wi={class:"col-center"},_i={class:"col-right"},Ci={class:"mono"},$i={class:"col-right"},Mi={key:0,class:"cost"},Ai={key:1,class:"no-data"},Bi={key:0,class:"time-ago"},zi={key:1,class:"no-data"},Ii={class:"action-group"},Ti=["onClick"],Ui=["onClick","disabled"],Vi=["onClick","disabled"],Si=["onClick","disabled"],Li=["onClick","disabled"],Ki=["onClick"],Oi={key:0,class:"loading-state"},Pi={key:1,class:"empty-state"},Gi={class:"table-footer"},Di={key:0,class:"selection-info"},Fi={class:"pagination-wrap"},Ri={class:"pagination-info"},qi={class:"pagination-controls"},Wi={class:"page-btns"},Ei=["disabled"],Ni={class:"page-current"},ji=["disabled"],Hi={class:"modal modal-sm"},Ji={class:"modal-body"},Xi={class:"delete-message"},Qi={class:"modal-footer"},Yi=["disabled"],Zi={key:0,class:"btn-loading"},ea={__name:"Accounts",setup(ie){const ee=f(!1),k=f([]),V=f([]),B=f(!1),J=f(null),I=f(!1),U=f(null),q=f(!1),X=f([]),G=f([]),L=f([]),W=f([]),D=f(!1),b=We({page:1,pageSize:20,total:0}),g=We({platform:"",status:"",search:""}),N=[{key:"claude",name:"Claude",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",types:["claude-official","claude-console","bedrock"]},{key:"openai",name:"OpenAI",gradient:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",types:["openai","openai-responses","azure-openai"]},{key:"gemini",name:"Gemini",gradient:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",types:["gemini"]}],F={"claude-official":{label:"Claude Official",color:"#667eea",platform:"Claude"},"claude-console":{label:"Claude Console",color:"#764ba2",platform:"Claude"},bedrock:{label:"AWS Bedrock",color:"#ff9900",platform:"Claude"},openai:{label:"OpenAI API",color:"#11998e",platform:"OpenAI"},"openai-responses":{label:"ChatGPT",color:"#38ef7d",platform:"OpenAI"},"azure-openai":{label:"Azure OpenAI",color:"#0078d4",platform:"OpenAI"},gemini:{label:"Gemini",color:"#4facfe",platform:"Gemini"}},h=E(()=>N.map(r=>{const s=k.value.filter(m=>r.types.includes(m.type));return{...r,count:s.length,validCount:s.filter(m=>m.status==="valid"&&m.enabled).length}}));function j(r){return V.value.includes(r)}function R(r){const s=V.value.indexOf(r);s>=0?V.value.splice(s,1):V.value.push(r)}function le(){V.value.length===k.value.length?V.value=[]:V.value=k.value.map(r=>r.id)}function ae(r,s=null){var u;const m=((u=F[r])==null?void 0:u.label)||r;if(!s)return m;if(r==="claude-official")return s.access_token&&s.session_key?"OAuth + SK":s.access_token?"OAuth":s.session_key?"SessionKey":s.api_key?"API Key":"Claude Official";if(r==="openai"){if(s.base_url)try{const S=new URL(s.base_url).hostname.replace("www.","");return S.includes("openrouter")?"OpenRouter":S.includes("together")?"Together AI":S.includes("groq")?"Groq":S.includes("deepseek")?"DeepSeek":S.split(".")[0]}catch{return"三方 API"}return"OpenAI"}return m}function Q(r){var s;return((s=F[r])==null?void 0:s.color)||"#999"}function ge(r){var s;return((s=F[r])==null?void 0:s.platform)||"Unknown"}function se(r){var m,u;return((u=(m=F[r])==null?void 0:m.platform)==null?void 0:u.toLowerCase())||"unknown"}function _(r){var s;return((s=N.find(m=>m.key===r))==null?void 0:s.name)||r}function a(r){return{valid:"正常",invalid:"无效",rate_limited:"限流中",overloaded:"过载",token_expired:"Token过期",suspended:"疑似封号",banned:"已封号",disabled:"已禁用"}[r]||r}function w(r){return r.five_hour_utilization!=null||r.seven_day_utilization!=null}function A(r){return r>=90?"danger":r>=70?"warning":"normal"}function H(r){const s=r.current_concurrency||0,m=r.max_concurrency||5;return s>=m?"danger":s>=m*.8?"warning":"normal"}function Y(r){return r?r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(1)+"K":r.toString():"0"}function ve(r){return r?r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(1)+"K":r.toString():"0"}function K(r){return r?r>=1e3?(r/1e3).toFixed(2)+"K":r>=1?r.toFixed(2):r>=.01?r.toFixed(3):r.toFixed(4):"0.00"}function ue(r){if(!r)return"-";const s=new Date(r),u=Math.floor((new Date-s)/1e3);return u<60?"刚刚":u<3600?Math.floor(u/60)+" 分钟前":u<86400?Math.floor(u/3600)+" 小时前":u<604800?Math.floor(u/86400)+" 天前":s.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})}function Ue(r){if(!r)return"";const s=new Date(r),u=Math.floor((s-new Date)/1e3);if(u<=0)return"即将恢复";if(u<60)return u+" 秒后恢复";if(u<3600)return Math.floor(u/60)+" 分钟后恢复";const fe=Math.floor(u/3600),S=Math.floor(u%3600/60);return fe+"时"+S+"分后恢复"}function _e(r){return["claude-official","openai-responses","gemini"].includes(r.type)}function Ve(r){return["invalid","rate_limited","token_expired","suspended","banned","disabled"].includes(r.status)}function be(r){return r.type==="claude-official"&&r.session_key}function l(r){return r.type==="claude-official"?!!r.access_token:r.type==="openai"||r.type==="gemini"}function Se(r){g.platform===r?g.platform="":g.platform=r,T()}let ce=null;function Le(){clearTimeout(ce),ce=setTimeout(()=>{T()},300)}Ze(()=>{ce&&(clearTimeout(ce),ce=null)});async function T(){ee.value=!0;try{const r={page:b.page,page_size:b.pageSize,status:g.status,search:g.search};if(g.platform){const m=N.find(u=>u.key===g.platform);m&&(r.types=m.types.join(","))}const s=await P.getAccounts(r);k.value=s.data.items||[],b.total=s.data.total||0}catch{M.error("加载账户列表失败")}finally{ee.value=!1}}async function Ke(r){try{await P.updateAccount(r.id,{enabled:r.enabled}),M.success("更新成功")}catch{r.enabled=!r.enabled,M.error("更新失败")}}function Oe(r){J.value={...r},B.value=!0}function Ce(r){U.value=r,I.value=!0}async function Pe(){if(U.value){q.value=!0;try{await P.deleteAccount(U.value.id),M.success("删除成功"),I.value=!1,U.value=null,T()}catch{M.error("删除失败")}finally{q.value=!1}}}async function $e(r){X.value.push(r.id);try{const s=await P.checkAccountHealth(r.id),m=s.data||s;m.healthy?M.success(`[${r.name}] ${m.message}`):M.warning(`[${r.name}] ${m.message}`),T()}catch{M.error("检测失败")}finally{X.value=X.value.filter(s=>s!==r.id)}}async function ye(r){G.value.push(r.id);try{await P.recoverAccount(r.id),M.success(`[${r.name}] 账号已强制恢复`),T()}catch{M.error("恢复失败")}finally{G.value=G.value.filter(s=>s!==r.id)}}async function Me(r){L.value.push(r.id);try{await P.refreshAccountToken(r.id),M.success(`[${r.name}] Token 刷新成功`),T()}catch{M.error("Token 刷新失败")}finally{L.value=L.value.filter(s=>s!==r.id)}}async function Ae(r){W.value.push(r.id);try{const s=await P.fetchAccountUsage(r.id),m=s.data||s;m.message?M.info(`[${r.name}] ${m.message}`):M.success(`[${r.name}] 用量同步成功`),T()}catch{M.error(`[${r.name}] 用量同步失败`)}finally{W.value=W.value.filter(s=>s!==r.id)}}async function Be(){D.value=!0;try{const r=await P.batchFetchUsage("all"),s=r.data||r,m=[];s.claude&&m.push(`Claude: ${s.claude.synced} 成功, ${s.claude.failed} 失败`),s.openai&&m.push(`OpenAI: ${s.openai.synced} 成功, ${s.openai.failed} 失败`),s.gemini&&m.push(`Gemini: ${s.gemini.synced} 成功, ${s.gemini.failed} 失败`),m.length>0?M.success(`批量同步完成
`+m.join(`
`)):M.info("没有找到需要同步的账户"),T()}catch{M.error("批量同步失败")}finally{D.value=!1}}async function ze(){if(V.value.length!==0)try{await tt.confirm(`确定要删除选中的 ${V.value.length} 个账户吗？`,"批量删除",{type:"warning"});for(const r of V.value)await P.deleteAccount(r);M.success("批量删除成功"),V.value=[],T()}catch(r){r!=="cancel"&&M.error("批量删除失败")}}function re(){B.value=!1,J.value=null,T()}function Ge(r){r||(J.value=null)}return et(()=>{T()}),(r,s)=>{var m;return n(),i("div",kn,[e("div",gn,[s[14]||(s[14]=e("div",{class:"header-content"},[e("h1",{class:"page-title"},"账户管理"),e("p",{class:"page-subtitle"},"管理 Claude、Gemini、OpenAI 等账户与代理配置")],-1)),e("div",bn,[e("button",{class:"btn btn-outline",onClick:T,disabled:ee.value},[(n(),i("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:z({spinning:ee.value})},[...s[10]||(s[10]=[e("polyline",{points:"23,4 23,10 17,10"},null,-1),e("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"},null,-1)])],2)),s[11]||(s[11]=p(" 刷新 ",-1))],8,xn),e("button",{class:"btn btn-outline info",onClick:Be,disabled:D.value},[(n(),i("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:z({spinning:D.value})},[...s[12]||(s[12]=[e("path",{d:"M21 12a9 9 0 11-6.219-8.56"},null,-1),e("polyline",{points:"21,4 21,12 13,12"},null,-1)])],2)),p(" "+c(D.value?"同步中...":"批量同步用量"),1)],8,hn),e("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=u=>B.value=!0)},[...s[13]||(s[13]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),p(" 添加账户 ",-1)])])])]),e("div",wn,[(n(!0),i(O,null,ne(h.value,u=>(n(),i("div",{key:u.key,class:z(["stat-card",{active:g.platform===u.key}]),onClick:fe=>Se(u.key)},[e("div",{class:"stat-icon",style:pe({background:u.gradient})},[u.key==="claude"?(n(),i("svg",Cn,[...s[15]||(s[15]=[e("path",{d:"M12 2a9 9 0 019 9c0 3.9-2.5 7.2-6 8.4V22l-3-2-3 2v-2.6c-3.5-1.2-6-4.5-6-8.4a9 9 0 019-9z"},null,-1)])])):u.key==="openai"?(n(),i("svg",$n,[...s[16]||(s[16]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"},null,-1)])])):(n(),i("svg",Mn,[...s[17]||(s[17]=[e("polygon",{points:"12,2 2,7 12,12 22,7"},null,-1),e("polyline",{points:"2,17 12,22 22,17"},null,-1),e("polyline",{points:"2,12 12,17 22,12"},null,-1)])]))],4),e("div",An,[e("h3",null,c(u.name),1),e("div",Bn,[e("span",zn,c(u.count)+" 个账户",1),e("span",In,[s[18]||(s[18]=e("span",{class:"valid-dot"},null,-1)),p(" "+c(u.validCount)+" 可用 ",1)])])])],10,_n))),128))]),e("div",Tn,[e("div",Un,[y(e("select",{"onUpdate:modelValue":s[1]||(s[1]=u=>g.status=u),onChange:T,class:"filter-select"},[...s[19]||(s[19]=[Z('<option value="" data-v-44ed622b>全部状态</option><option value="valid" data-v-44ed622b>正常</option><option value="invalid" data-v-44ed622b>无效</option><option value="rate_limited" data-v-44ed622b>限流中</option><option value="token_expired" data-v-44ed622b>Token过期</option><option value="suspended" data-v-44ed622b>疑似封号</option><option value="banned" data-v-44ed622b>已封号</option><option value="disabled" data-v-44ed622b>已禁用</option>',8)])],544),[[de,g.status]]),e("div",Vn,[s[20]||(s[20]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),y(e("input",{"onUpdate:modelValue":s[2]||(s[2]=u=>g.search=u),placeholder:"搜索账户名称...",onInput:Le},null,544),[[x,g.search]])])]),e("div",Sn,[g.platform?(n(),i("span",Ln,[p(c(_(g.platform))+" ",1),e("button",{onClick:s[3]||(s[3]=u=>{g.platform="",T()})},[...s[21]||(s[21]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])])):v("",!0)])]),e("div",Kn,[e("div",On,[e("table",Pn,[e("thead",null,[e("tr",null,[e("th",Gn,[e("input",{type:"checkbox",checked:V.value.length===k.value.length&&k.value.length>0,onChange:le},null,40,Dn)]),s[22]||(s[22]=e("th",null,"#",-1)),s[23]||(s[23]=e("th",{class:"col-account"},"账户",-1)),s[24]||(s[24]=e("th",null,"平台/类型",-1)),s[25]||(s[25]=e("th",null,"状态",-1)),s[26]||(s[26]=e("th",null,"用量",-1)),s[27]||(s[27]=e("th",{class:"col-center"},"启用",-1)),s[28]||(s[28]=e("th",{class:"col-center"},"优先级",-1)),s[29]||(s[29]=e("th",{class:"col-center"},"并发",-1)),s[30]||(s[30]=e("th",{class:"col-right"},"请求数",-1)),s[31]||(s[31]=e("th",{class:"col-right"},"总费用",-1)),s[32]||(s[32]=e("th",null,"最后使用",-1)),s[33]||(s[33]=e("th",null,"操作",-1))])]),ee.value?v("",!0):(n(),i("tbody",Fn,[(n(!0),i(O,null,ne(k.value,(u,fe)=>(n(),i("tr",{key:u.id},[e("td",Rn,[e("input",{type:"checkbox",checked:j(u.id),onChange:S=>R(u.id)},null,40,qn)]),e("td",Wn,c((b.page-1)*b.pageSize+fe+1),1),e("td",En,[e("div",Nn,[e("div",{class:"account-avatar",style:pe({background:Q(u.type)})},[...s[34]||(s[34]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})],-1)])],4),e("div",jn,[e("span",Hn,c(u.name),1),e("span",Jn,c(ae(u.type,u)),1)])])]),e("td",null,[e("span",{class:z(["platform-badge",se(u.type)])},c(ge(u.type)),3)]),e("td",null,[e("div",Xn,[e("span",{class:z(["status-badge",u.status])},[s[35]||(s[35]=e("span",{class:"status-dot"},null,-1)),p(" "+c(a(u.status)),1)],2),u.status==="rate_limited"&&u.rate_limit_reset_at?(n(),i("div",Qn,[s[36]||(s[36]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12,6 12,12 16,14"})],-1)),p(" "+c(Ue(u.rate_limit_reset_at)),1)])):v("",!0),u.status==="suspended"&&u.suspended_count>0?(n(),i("div",Yn," 连续失败 "+c(u.suspended_count)+" 次 ",1)):v("",!0)])]),e("td",null,[u.type==="claude-official"&&w(u)?(n(),i("div",Zn,[u.five_hour_utilization!=null?(n(),i("div",ei,[e("div",ti,[s[37]||(s[37]=e("span",{class:"label-text"},"5H",-1)),e("span",li,c(u.five_hour_utilization.toFixed(1))+"%",1)]),e("div",si,[e("div",{class:z(["usage-bar-fill",A(u.five_hour_utilization)]),style:pe({width:Math.min(u.five_hour_utilization,100)+"%"})},null,6)])])):v("",!0),u.seven_day_utilization!=null?(n(),i("div",oi,[e("div",ni,[s[38]||(s[38]=e("span",{class:"label-text"},"7D",-1)),e("span",ii,c(u.seven_day_utilization.toFixed(1))+"%",1)]),e("div",ai,[e("div",{class:z(["usage-bar-fill",A(u.seven_day_utilization)]),style:pe({width:Math.min(u.seven_day_utilization,100)+"%"})},null,6)])])):v("",!0)])):u.daily_budget>0?(n(),i("div",ri,[e("div",di,[e("div",ui,[s[39]||(s[39]=e("span",{class:"label-text"},"今日",-1)),e("span",pi,"$"+c(K(u.today_cost||0))+" / $"+c(K(u.daily_budget)),1)]),e("div",vi,[e("div",{class:z(["usage-bar-fill",A(u.budget_utilization||0)]),style:pe({width:Math.min(u.budget_utilization||0,100)+"%"})},null,6)])])])):u.today_tokens>0||u.today_count>0?(n(),i("div",ci,[e("span",yi,"$"+c(K(u.today_cost||0)),1),e("span",fi,c(ve(u.today_tokens))+" tokens",1)])):(n(),i("span",mi,"-"))]),e("td",ki,[e("label",gi,[y(e("input",{type:"checkbox","onUpdate:modelValue":S=>u.enabled=S,onChange:S=>Ke(u)},null,40,bi),[[Ee,u.enabled]]),s[40]||(s[40]=e("span",{class:"toggle-slider"},null,-1))])]),e("td",xi,[e("span",hi,c(u.priority),1)]),e("td",wi,[e("span",{class:z(["concurrency-badge",H(u)])},c(u.current_concurrency||0)+" / "+c(u.max_concurrency||5),3)]),e("td",_i,[e("span",Ci,c(Y(u.request_count)),1)]),e("td",$i,[u.total_cost>0?(n(),i("span",Mi,"$"+c(K(u.total_cost)),1)):(n(),i("span",Ai,"-"))]),e("td",null,[u.last_used_at?(n(),i("span",Bi,c(ue(u.last_used_at)),1)):(n(),i("span",zi,"-"))]),e("td",null,[e("div",Ii,[e("button",{class:"action-btn",onClick:S=>Oe(u),title:"编辑"},[...s[41]||(s[41]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Ti),l(u)?(n(),i("button",{key:0,class:"action-btn info",onClick:S=>Ae(u),disabled:W.value.includes(u.id),title:"同步用量"},[...s[42]||(s[42]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 11-6.219-8.56"}),e("polyline",{points:"21,4 21,12 13,12"})],-1)])],8,Ui)):v("",!0),_e(u)?(n(),i("button",{key:1,class:"action-btn info",onClick:S=>$e(u),disabled:X.value.includes(u.id),title:"检测"},[...s[43]||(s[43]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})],-1)])],8,Vi)):v("",!0),Ve(u)?(n(),i("button",{key:2,class:"action-btn success",onClick:S=>ye(u),disabled:G.value.includes(u.id),title:"恢复"},[...s[44]||(s[44]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"23,4 23,10 17,10"}),e("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})],-1)])],8,Si)):v("",!0),be(u)?(n(),i("button",{key:3,class:"action-btn warning",onClick:S=>Me(u),disabled:L.value.includes(u.id),title:"刷新Token"},[...s[45]||(s[45]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})],-1)])],8,Li)):v("",!0),e("button",{class:"action-btn danger",onClick:S=>Ce(u),title:"删除"},[...s[46]||(s[46]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3,6 5,6 21,6"}),e("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})],-1)])],8,Ki)])])]))),128))]))]),ee.value?(n(),i("div",Oi,[...s[47]||(s[47]=[e("div",{class:"loading-spinner"},null,-1),e("span",null,"加载中...",-1)])])):v("",!0),!ee.value&&k.value.length===0?(n(),i("div",Pi,[...s[48]||(s[48]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),e("circle",{cx:"9",cy:"7",r:"4"})],-1),e("span",null,"暂无账户",-1)])])):v("",!0)]),e("div",Gi,[V.value.length>0?(n(),i("div",Di,[p(" 已选择 "+c(V.value.length)+" 项 ",1),e("button",{class:"link-btn danger",onClick:ze},"批量删除")])):v("",!0),e("div",Fi,[e("div",Ri,"共 "+c(b.total)+" 条",1),e("div",qi,[y(e("select",{"onUpdate:modelValue":s[4]||(s[4]=u=>b.pageSize=u),onChange:T,class:"page-size-select"},[...s[49]||(s[49]=[e("option",{value:10},"10 条/页",-1),e("option",{value:20},"20 条/页",-1),e("option",{value:50},"50 条/页",-1)])],544),[[de,b.pageSize]]),e("div",Wi,[e("button",{class:"page-btn",disabled:b.page<=1,onClick:s[5]||(s[5]=u=>{b.page--,T()})},[...s[50]||(s[50]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15,18 9,12 15,6"})],-1)])],8,Ei),e("span",Ni,c(b.page)+" / "+c(Math.ceil(b.total/b.pageSize)||1),1),e("button",{class:"page-btn",disabled:b.page>=Math.ceil(b.total/b.pageSize),onClick:s[6]||(s[6]=u=>{b.page++,T()})},[...s[51]||(s[51]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9,18 15,12 9,6"})],-1)])],8,ji)])])])])]),(n(),he(He,{to:"body"},[I.value?(n(),i("div",{key:0,class:"modal-overlay",onClick:s[8]||(s[8]=me(u=>I.value=!1,["self"]))},[e("div",Hi,[s[52]||(s[52]=e("div",{class:"modal-header danger"},[e("div",{class:"danger-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e("line",{x1:"9",y1:"9",x2:"15",y2:"15"})])]),e("h2",null,"确认删除")],-1)),e("div",Ji,[e("p",Xi,'确定要删除账户 "'+c((m=U.value)==null?void 0:m.name)+'" 吗？此操作不可撤销。',1)]),e("div",Qi,[e("button",{class:"btn btn-secondary",onClick:s[7]||(s[7]=u=>I.value=!1)},"取消"),e("button",{class:"btn btn-danger",disabled:q.value,onClick:Pe},[q.value?(n(),i("span",Zi)):v("",!0),p(" "+c(q.value?"删除中...":"删除"),1)],8,Yi)])])])):v("",!0)])),ke(mn,{modelValue:B.value,"onUpdate:modelValue":[s[9]||(s[9]=u=>B.value=u),Ge],"edit-data":J.value,onSuccess:re},null,8,["modelValue","edit-data"])])}}},la=Ne(ea,[["__scopeId","data-v-44ed622b"]]);export{la as default};
