import{_ as ke,r as d,a as O,H as _e,o as he,c as o,b as e,f,e as g,s as v,p as u,P as Q,F as W,x as X,d as xe,t as p,L as P,w as I,v as x,l as c,E as a,n}from"./index-CQyKkE5B.js";const Ce={class:"error-config-page"},we={class:"tab-container"},Me={class:"tab-nav"},Ee={class:"tab-panel"},Be={class:"action-bar"},Re={class:"action-group"},$e=["disabled"],Ve=["disabled"],Se={class:"action-group"},ze=["disabled"],Ae=["disabled"],De={class:"table-card"},Te={class:"table-container"},Ue={class:"data-table"},He={key:0},Le={class:"error-type"},qe={class:"muted-text"},Fe={class:"custom-message"},je={class:"description"},Ne=["onClick"],Oe={class:"action-btns"},Pe=["onClick"],Ie=["onClick"],Ge={key:0,class:"loading-state"},Je={key:1,class:"empty-state"},Ke={class:"tab-panel"},Qe={class:"action-bar"},We={class:"action-group"},Xe=["disabled"],Ye=["disabled"],Ze={class:"action-group"},es=["disabled"],ss=["disabled"],ts={class:"table-card"},ls={class:"table-container"},as={class:"data-table"},os={key:0},ns={class:"match-condition"},is={key:1,class:"condition-sep"},rs={key:2,class:"keyword-code"},ds={key:3,class:"muted-text"},us={class:"description"},cs={class:"priority-num"},vs=["onClick"],ps={class:"action-btns"},bs=["onClick"],gs=["onClick"],fs={key:0,class:"loading-state"},ys={key:1,class:"empty-state"},ms={key:0,class:"table-footer"},ks={class:"pagination-info"},_s={class:"pagination-controls"},hs={class:"page-btns"},xs=["disabled"],Cs={class:"page-info"},ws=["disabled"],Ms={class:"modal"},Es={class:"modal-header"},Bs={class:"modal-title"},Rs={class:"modal-body"},$s={class:"form-group"},Vs=["disabled"],Ss={class:"form-group"},zs=["disabled"],As={class:"form-group"},Ds={class:"form-group"},Ts={class:"form-group form-inline"},Us={class:"modal-footer"},Hs=["disabled"],Ls={key:0,class:"btn-spinner"},qs={class:"modal modal-lg"},Fs={class:"modal-header"},js={class:"modal-title"},Ns={class:"modal-body"},Os={class:"form-group"},Ps={class:"form-row"},Is={class:"form-group"},Gs={class:"form-group"},Js={class:"form-group"},Ks={class:"form-row"},Qs={class:"form-group"},Ws={class:"form-group form-inline"},Xs={class:"modal-footer"},Ys=["disabled"],Zs={key:0,class:"btn-spinner"},et={class:"modal modal-sm"},st={class:"modal-header"},tt={class:"modal-title"},lt={class:"modal-body"},at={class:"confirm-message"},ot={class:"modal-footer"},nt={__name:"ErrorMessages",setup(it){const m=d("messages"),w=d(!1),G=d(""),J=d("");let j=null;function N(t,s,l){G.value=t,J.value=s,j=l,w.value=!0}function Y(){w.value=!1,j&&j()}const M=d(!1),R=d(!1),$=d(!1),V=d(!1),S=d(!1),z=d(!1),k=d(!1),C=d(!1),A=d([]),i=O({id:null,code:400,error_type:"",custom_message:"",description:"",enabled:!0});async function _(){M.value=!0;try{const t=await c.getErrorMessages();A.value=t.data||t||[]}catch{a.error("加载失败")}finally{M.value=!1}}function Z(){C.value=!1,Object.assign(i,{id:null,code:400,error_type:"",custom_message:"",description:"",enabled:!0}),k.value=!0}function ee(t){C.value=!0,Object.assign(i,{id:t.id,code:t.code,error_type:t.error_type,custom_message:t.custom_message,description:t.description||"",enabled:t.enabled}),k.value=!0}async function se(){if(!i.code||!i.error_type||!i.custom_message){a.error("请填写必填项");return}V.value=!0;try{C.value?(await c.updateErrorMessage(i.id,{custom_message:i.custom_message,enabled:i.enabled,description:i.description}),a.success("更新成功")):(await c.createErrorMessage({code:i.code,error_type:i.error_type,custom_message:i.custom_message,enabled:i.enabled,description:i.description}),a.success("创建成功")),k.value=!1,_()}catch{a.error("操作失败")}finally{V.value=!1}}async function te(t){try{await c.toggleErrorMessage(t.id),t.enabled=!t.enabled,a.success("状态已更新")}catch{a.error("操作失败")}}function le(t){N("确认删除","确定删除该错误消息配置?",async()=>{try{await c.deleteErrorMessage(t.id),a.success("删除成功"),_()}catch{a.error("删除失败")}})}async function ae(){R.value=!0;try{await c.initErrorMessages(),a.success("默认配置已初始化"),_()}catch{a.error("初始化失败")}finally{R.value=!1}}async function oe(){$.value=!0;try{await c.refreshErrorMessages(),a.success("缓存已刷新")}catch{a.error("刷新失败")}finally{$.value=!1}}async function ne(){var t;S.value=!0;try{const s=await c.enableAllErrorMessages();a.success(`已启用所有配置（影响 ${((t=s.data)==null?void 0:t.affected)||0} 条）`),_()}catch{a.error("操作失败")}finally{S.value=!1}}async function ie(){var t;z.value=!0;try{const s=await c.disableAllErrorMessages();a.success(`已禁用所有配置（影响 ${((t=s.data)==null?void 0:t.affected)||0} 条）`),_()}catch{a.error("操作失败")}finally{z.value=!1}}const E=d(!1),D=d(!1),T=d(!1),U=d(!1),H=d(!1),L=d(!1),h=d(!1),q=d(!1),F=d([]),b=O({page:1,pageSize:50,total:0}),r=O({id:null,http_status_code:0,keyword:"",target_status:"valid",priority:50,description:"",enabled:!0});async function y(){var t,s;E.value=!0;try{const l=await c.getErrorRules({page:b.page,page_size:b.pageSize});F.value=((t=l.data)==null?void 0:t.items)||[],b.total=((s=l.data)==null?void 0:s.total)||0}catch{a.error("加载失败")}finally{E.value=!1}}function re(){q.value=!1,Object.assign(r,{id:null,http_status_code:0,keyword:"",target_status:"valid",priority:50,description:"",enabled:!0}),h.value=!0}function de(t){q.value=!0,Object.assign(r,{id:t.id,http_status_code:t.http_status_code,keyword:t.keyword,target_status:t.target_status,priority:t.priority,description:t.description||"",enabled:t.enabled}),h.value=!0}async function ue(){if(!r.target_status){a.error("请选择目标状态");return}U.value=!0;try{const t={http_status_code:r.http_status_code||0,keyword:r.keyword||"",target_status:r.target_status,priority:r.priority,description:r.description,enabled:r.enabled};q.value?(await c.updateErrorRule(r.id,t),a.success("更新成功")):(await c.createErrorRule(t),a.success("创建成功")),h.value=!1,y()}catch{a.error("操作失败")}finally{U.value=!1}}async function ce(t){try{await c.updateErrorRule(t.id,{enabled:!t.enabled}),t.enabled=!t.enabled,a.success("状态已更新")}catch{a.error("操作失败")}}function ve(t){N("确认删除","确定删除该规则?",async()=>{try{await c.deleteErrorRule(t.id),a.success("删除成功"),y()}catch{a.error("删除失败")}})}async function pe(){N("确认重置","此操作将删除所有现有规则并恢复为默认规则，是否继续？",async()=>{D.value=!0;try{await c.resetErrorRules(),a.success("已重置为默认规则"),y()}catch{a.error("重置失败")}finally{D.value=!1}})}async function be(){var t;T.value=!0;try{const s=await c.refreshErrorRulesCache();a.success(`缓存已刷新，共 ${((t=s.data)==null?void 0:t.rule_count)||0} 条规则`)}catch{a.error("刷新失败")}finally{T.value=!1}}async function ge(){var t;H.value=!0;try{const s=await c.enableAllErrorRules();a.success(`已启用所有规则（影响 ${((t=s.data)==null?void 0:t.affected)||0} 条）`),y()}catch{a.error("操作失败")}finally{H.value=!1}}async function fe(){var t;L.value=!0;try{const s=await c.disableAllErrorRules();a.success(`已禁用所有规则（影响 ${((t=s.data)==null?void 0:t.affected)||0} 条）`),y()}catch{a.error("操作失败")}finally{L.value=!1}}function K(t){return t>=500?"danger":t===429?"warning":t>=400?"info":""}function ye(t){switch(t){case"valid":return"success";case"invalid":return"danger";case"rate_limited":return"warning";case"overloaded":return"info";default:return""}}function me(t){switch(t){case"valid":return"忽略";case"invalid":return"禁用账户";case"rate_limited":return"临时限流";case"overloaded":return"过载";default:return t}}return _e(m,t=>{t==="messages"&&A.value.length===0&&_(),t==="rules"&&F.value.length===0&&y()}),he(()=>{_()}),(t,s)=>(n(),o("div",Ce,[s[81]||(s[81]=e("div",{class:"page-header"},[e("div",{class:"header-content"},[e("h1",{class:"page-title"},"错误配置"),e("p",{class:"page-subtitle"},"管理错误消息和自动处理规则")])],-1)),e("div",we,[e("div",Me,[e("button",{class:v(["tab-btn",{active:m.value==="messages"}]),onClick:s[0]||(s[0]=l=>m.value="messages")},[...s[24]||(s[24]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1),u(" 错误消息 ",-1)])],2),e("button",{class:v(["tab-btn",{active:m.value==="rules"}]),onClick:s[1]||(s[1]=l=>m.value="rules")},[...s[25]||(s[25]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),e("polyline",{points:"2 17 12 22 22 17"}),e("polyline",{points:"2 12 12 17 22 12"})],-1),u(" 错误规则 ",-1)])],2)])]),f(e("div",Ee,[e("div",Be,[e("div",Re,[e("button",{class:"btn btn-success",onClick:ne,disabled:S.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:S.value})},[...s[26]||(s[26]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])],2)),s[27]||(s[27]=u(" 全部启用 ",-1))],8,$e),e("button",{class:"btn btn-warning",onClick:ie,disabled:z.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:z.value})},[...s[28]||(s[28]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"},null,-1)])],2)),s[29]||(s[29]=u(" 全部禁用 ",-1))],8,Ve)]),e("div",Se,[e("button",{class:"btn btn-primary",onClick:Z},[...s[30]||(s[30]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),u(" 新增配置 ",-1)])]),e("button",{class:"btn btn-outline",onClick:ae,disabled:R.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:R.value})},[...s[31]||(s[31]=[e("path",{d:"M21 12a9 9 0 11-2-5.65"},null,-1),e("path",{d:"M21 3v6h-6"},null,-1)])],2)),s[32]||(s[32]=u(" 初始化默认 ",-1))],8,ze),e("button",{class:"btn btn-outline",onClick:oe,disabled:$.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:$.value})},[...s[33]||(s[33]=[e("polyline",{points:"23,4 23,10 17,10"},null,-1),e("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"},null,-1)])],2)),s[34]||(s[34]=u(" 刷新缓存 ",-1))],8,Ae)])]),e("div",De,[e("div",Te,[e("table",Ue,[s[38]||(s[38]=e("thead",null,[e("tr",null,[e("th",{width:"90"},"状态码"),e("th",{width:"180"},"错误类型"),e("th",null,"原始信息"),e("th",null,"自定义消息"),e("th",{width:"150"},"说明"),e("th",{width:"80"},"状态"),e("th",{width:"100"},"操作")])],-1)),M.value?g("",!0):(n(),o("tbody",He,[(n(!0),o(W,null,X(A.value,l=>(n(),o("tr",{key:l.id},[e("td",null,[e("span",{class:v(["code-badge",K(l.code)])},p(l.code),3)]),e("td",null,[e("span",Le,p(l.error_type),1)]),e("td",null,[e("span",qe,p(l.original_message||"-"),1)]),e("td",null,[e("span",Fe,p(l.custom_message),1)]),e("td",null,[e("span",je,p(l.description||"-"),1)]),e("td",null,[e("button",{class:v(["toggle-switch",{active:l.enabled}]),onClick:B=>te(l)},[...s[35]||(s[35]=[e("span",{class:"toggle-thumb"},null,-1)])],10,Ne)]),e("td",null,[e("div",Oe,[e("button",{class:"action-btn edit",onClick:B=>ee(l),title:"编辑"},[...s[36]||(s[36]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Pe),e("button",{class:"action-btn delete",onClick:B=>le(l),title:"删除"},[...s[37]||(s[37]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})],-1)])],8,Ie)])])]))),128))]))]),M.value?(n(),o("div",Ge,[...s[39]||(s[39]=[e("div",{class:"loading-spinner"},null,-1),e("span",null,"加载中...",-1)])])):g("",!0),!M.value&&A.value.length===0?(n(),o("div",Je,[...s[40]||(s[40]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1),e("span",null,"暂无错误消息配置",-1)])])):g("",!0)])])],512),[[Q,m.value==="messages"]]),f(e("div",Ke,[s[59]||(s[59]=xe('<div class="guide-card" data-v-8dcbee0c><div class="guide-header" data-v-8dcbee0c><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-8dcbee0c><circle cx="12" cy="12" r="10" data-v-8dcbee0c></circle><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3" data-v-8dcbee0c></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-8dcbee0c></line></svg><span data-v-8dcbee0c>规则说明</span></div><div class="guide-content" data-v-8dcbee0c><div class="guide-item" data-v-8dcbee0c><span class="guide-badge danger" data-v-8dcbee0c>禁用账户</span><span class="guide-text" data-v-8dcbee0c>账户被封号、认证失效时，自动禁用该账户</span></div><div class="guide-item" data-v-8dcbee0c><span class="guide-badge warning" data-v-8dcbee0c>临时限流</span><span class="guide-text" data-v-8dcbee0c>遇到限流或临时错误，切换其他账户重试（1小时后恢复）</span></div><div class="guide-item" data-v-8dcbee0c><span class="guide-badge info" data-v-8dcbee0c>过载</span><span class="guide-text" data-v-8dcbee0c>服务过载，临时切换账户</span></div></div></div>',1)),e("div",Qe,[e("div",We,[e("button",{class:"btn btn-success",onClick:ge,disabled:H.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:H.value})},[...s[41]||(s[41]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])],2)),s[42]||(s[42]=u(" 全部启用 ",-1))],8,Xe),e("button",{class:"btn btn-warning",onClick:fe,disabled:L.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:L.value})},[...s[43]||(s[43]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"},null,-1)])],2)),s[44]||(s[44]=u(" 全部禁用 ",-1))],8,Ye)]),e("div",Ze,[e("button",{class:"btn btn-primary",onClick:re},[...s[45]||(s[45]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),u(" 新增规则 ",-1)])]),e("button",{class:"btn btn-outline",onClick:pe,disabled:D.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:D.value})},[...s[46]||(s[46]=[e("path",{d:"M21 12a9 9 0 11-2-5.65"},null,-1),e("path",{d:"M21 3v6h-6"},null,-1)])],2)),s[47]||(s[47]=u(" 重置为默认 ",-1))],8,es),e("button",{class:"btn btn-outline",onClick:be,disabled:T.value},[(n(),o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:v({spinning:T.value})},[...s[48]||(s[48]=[e("polyline",{points:"23,4 23,10 17,10"},null,-1),e("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"},null,-1)])],2)),s[49]||(s[49]=u(" 刷新缓存 ",-1))],8,ss)])]),e("div",ts,[e("div",ls,[e("table",as,[s[53]||(s[53]=e("thead",null,[e("tr",null,[e("th",{width:"120"},"处理方式"),e("th",null,"匹配条件"),e("th",{width:"200"},"说明"),e("th",{width:"80"},"优先级"),e("th",{width:"70"},"启用"),e("th",{width:"100"},"操作")])],-1)),E.value?g("",!0):(n(),o("tbody",os,[(n(!0),o(W,null,X(F.value,l=>(n(),o("tr",{key:l.id},[e("td",null,[e("span",{class:v(["status-badge",ye(l.target_status)])},p(me(l.target_status)),3)]),e("td",null,[e("div",ns,[l.http_status_code>0?(n(),o("span",{key:0,class:v(["code-badge",K(l.http_status_code)])}," HTTP "+p(l.http_status_code),3)):g("",!0),l.http_status_code>0&&l.keyword?(n(),o("span",is,"+")):g("",!0),l.keyword?(n(),o("code",rs,p(l.keyword),1)):g("",!0),!l.http_status_code&&!l.keyword?(n(),o("span",ds,"匹配所有错误")):g("",!0)])]),e("td",null,[e("span",us,p(l.description||"-"),1)]),e("td",null,[e("span",cs,p(l.priority),1)]),e("td",null,[e("button",{class:v(["toggle-switch",{active:l.enabled}]),onClick:B=>ce(l)},[...s[50]||(s[50]=[e("span",{class:"toggle-thumb"},null,-1)])],10,vs)]),e("td",null,[e("div",ps,[e("button",{class:"action-btn edit",onClick:B=>de(l),title:"编辑"},[...s[51]||(s[51]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,bs),e("button",{class:"action-btn delete",onClick:B=>ve(l),title:"删除"},[...s[52]||(s[52]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})],-1)])],8,gs)])])]))),128))]))]),E.value?(n(),o("div",fs,[...s[54]||(s[54]=[e("div",{class:"loading-spinner"},null,-1),e("span",null,"加载中...",-1)])])):g("",!0),!E.value&&F.value.length===0?(n(),o("div",ys,[...s[55]||(s[55]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),e("polyline",{points:"2 17 12 22 22 17"}),e("polyline",{points:"2 12 12 17 22 12"})],-1),e("span",null,"暂无错误规则配置",-1)])])):g("",!0)]),b.total>0?(n(),o("div",ms,[e("div",ks,"共 "+p(b.total)+" 条",1),e("div",_s,[f(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>b.pageSize=l),onChange:y,class:"page-size-select"},[...s[56]||(s[56]=[e("option",{value:20},"20 条/页",-1),e("option",{value:50},"50 条/页",-1),e("option",{value:100},"100 条/页",-1)])],544),[[P,b.pageSize]]),e("div",hs,[e("button",{class:"page-btn",disabled:b.page<=1,onClick:s[3]||(s[3]=l=>{b.page--,y()})},[...s[57]||(s[57]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)])],8,xs),e("span",Cs,p(b.page)+" / "+p(Math.ceil(b.total/b.pageSize)||1),1),e("button",{class:"page-btn",disabled:b.page>=Math.ceil(b.total/b.pageSize),onClick:s[4]||(s[4]=l=>{b.page++,y()})},[...s[58]||(s[58]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9 18 15 12 9 6"})],-1)])],8,ws)])])])):g("",!0)])],512),[[Q,m.value==="rules"]]),k.value?(n(),o("div",{key:0,class:"modal-overlay",onClick:s[12]||(s[12]=I(l=>k.value=!1,["self"]))},[e("div",Ms,[e("div",Es,[e("h3",Bs,p(C.value?"编辑错误消息":"新增错误消息"),1),e("button",{class:"modal-close",onClick:s[5]||(s[5]=l=>k.value=!1)},[...s[60]||(s[60]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",Rs,[e("div",$s,[s[62]||(s[62]=e("label",{class:"form-label"},[u("状态码 "),e("span",{class:"required"},"*")],-1)),f(e("select",{"onUpdate:modelValue":s[6]||(s[6]=l=>i.code=l),class:"form-select",disabled:C.value},[...s[61]||(s[61]=[e("option",{value:400},"400 - Bad Request",-1),e("option",{value:401},"401 - Unauthorized",-1),e("option",{value:403},"403 - Forbidden",-1),e("option",{value:429},"429 - Too Many Requests",-1),e("option",{value:500},"500 - Internal Server Error",-1),e("option",{value:502},"502 - Bad Gateway",-1),e("option",{value:503},"503 - Service Unavailable",-1)])],8,Vs),[[P,i.code]])]),e("div",Ss,[s[63]||(s[63]=e("label",{class:"form-label"},[u("错误类型 "),e("span",{class:"required"},"*")],-1)),f(e("input",{"onUpdate:modelValue":s[7]||(s[7]=l=>i.error_type=l),class:"form-input",disabled:C.value,placeholder:"如: auth_failed"},null,8,zs),[[x,i.error_type]])]),e("div",As,[s[64]||(s[64]=e("label",{class:"form-label"},[u("自定义消息 "),e("span",{class:"required"},"*")],-1)),f(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=l=>i.custom_message=l),class:"form-textarea",rows:"3",placeholder:"返回给用户的错误消息"},null,512),[[x,i.custom_message]])]),e("div",Ds,[s[65]||(s[65]=e("label",{class:"form-label"},"说明",-1)),f(e("input",{"onUpdate:modelValue":s[9]||(s[9]=l=>i.description=l),class:"form-input",placeholder:"管理员备注（可选）"},null,512),[[x,i.description]])]),e("div",Ts,[s[67]||(s[67]=e("label",{class:"form-label"},"启用",-1)),e("button",{class:v(["toggle-switch",{active:i.enabled}]),onClick:s[10]||(s[10]=l=>i.enabled=!i.enabled)},[...s[66]||(s[66]=[e("span",{class:"toggle-thumb"},null,-1)])],2)])]),e("div",Us,[e("button",{class:"btn btn-outline",onClick:s[11]||(s[11]=l=>k.value=!1)},"取消"),e("button",{class:"btn btn-primary",onClick:se,disabled:V.value},[V.value?(n(),o("span",Ls)):g("",!0),s[68]||(s[68]=u(" 确定 ",-1))],8,Hs)])])])):g("",!0),h.value?(n(),o("div",{key:1,class:"modal-overlay",onClick:s[21]||(s[21]=I(l=>h.value=!1,["self"]))},[e("div",qs,[e("div",Fs,[e("h3",js,p(q.value?"编辑规则":"新增规则"),1),e("button",{class:"modal-close",onClick:s[13]||(s[13]=l=>h.value=!1)},[...s[69]||(s[69]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",Ns,[e("div",Os,[s[71]||(s[71]=e("label",{class:"form-label"},"HTTP状态码",-1)),e("div",Ps,[f(e("input",{type:"number","onUpdate:modelValue":s[14]||(s[14]=l=>r.http_status_code=l),class:"form-input",min:"0",max:"599",placeholder:"0",style:{width:"120px"}},null,512),[[x,r.http_status_code,void 0,{number:!0}]]),s[70]||(s[70]=e("span",{class:"form-hint"},"0 表示匹配任意状态码",-1))])]),e("div",Is,[s[72]||(s[72]=e("label",{class:"form-label"},"错误关键词",-1)),f(e("input",{"onUpdate:modelValue":s[15]||(s[15]=l=>r.keyword=l),class:"form-input",placeholder:"匹配错误消息中的关键词（不区分大小写，留空表示任意）"},null,512),[[x,r.keyword]])]),e("div",Gs,[s[74]||(s[74]=e("label",{class:"form-label"},[u("目标状态 "),e("span",{class:"required"},"*")],-1)),f(e("select",{"onUpdate:modelValue":s[16]||(s[16]=l=>r.target_status=l),class:"form-select"},[...s[73]||(s[73]=[e("option",{value:"valid"},"valid - 不修改（仅记录错误）",-1),e("option",{value:"invalid"},"invalid - 无效（禁用账户）",-1),e("option",{value:"rate_limited"},"rate_limited - 限流（1小时后恢复）",-1),e("option",{value:"overloaded"},"overloaded - 过载（临时不可用）",-1)])],512),[[P,r.target_status]])]),e("div",Js,[s[76]||(s[76]=e("label",{class:"form-label"},"优先级",-1)),e("div",Ks,[f(e("input",{type:"number","onUpdate:modelValue":s[17]||(s[17]=l=>r.priority=l),class:"form-input",min:"0",max:"1000",style:{width:"120px"}},null,512),[[x,r.priority,void 0,{number:!0}]]),s[75]||(s[75]=e("span",{class:"form-hint"},"数值越大优先级越高",-1))])]),e("div",Qs,[s[77]||(s[77]=e("label",{class:"form-label"},"描述",-1)),f(e("input",{"onUpdate:modelValue":s[18]||(s[18]=l=>r.description=l),class:"form-input",placeholder:"规则说明（可选）"},null,512),[[x,r.description]])]),e("div",Ws,[s[79]||(s[79]=e("label",{class:"form-label"},"启用",-1)),e("button",{class:v(["toggle-switch",{active:r.enabled}]),onClick:s[19]||(s[19]=l=>r.enabled=!r.enabled)},[...s[78]||(s[78]=[e("span",{class:"toggle-thumb"},null,-1)])],2)])]),e("div",Xs,[e("button",{class:"btn btn-outline",onClick:s[20]||(s[20]=l=>h.value=!1)},"取消"),e("button",{class:"btn btn-primary",onClick:ue,disabled:U.value},[U.value?(n(),o("span",Zs)):g("",!0),s[80]||(s[80]=u(" 确定 ",-1))],8,Ys)])])])):g("",!0),w.value?(n(),o("div",{key:2,class:"modal-overlay",onClick:s[23]||(s[23]=I(l=>w.value=!1,["self"]))},[e("div",et,[e("div",st,[e("h3",tt,p(G.value),1)]),e("div",lt,[e("p",at,p(J.value),1)]),e("div",ot,[e("button",{class:"btn btn-outline",onClick:s[22]||(s[22]=l=>w.value=!1)},"取消"),e("button",{class:"btn btn-danger",onClick:Y},"确定")])])])):g("",!0)]))}},dt=ke(nt,[["__scopeId","data-v-8dcbee0c"]]);export{dt as default};
