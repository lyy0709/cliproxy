import{_ as ys,r as vs,o as hs,c as d,b as s,e as gs,p as us,t as a,d as _,G as h,s as p,l as fs,E as _s,n}from"./index-CQyKkE5B.js";const xs={class:"system-monitor-page"},ms={class:"page-header"},ks=["disabled"],bs={key:0,class:"btn-spinner",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ws={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Bs={class:"section"},Ms={class:"stats-grid"},Cs={class:"stat-card"},qs={class:"stat-info"},Fs={class:"stat-value"},Ss={class:"stat-card"},zs={class:"stat-info"},Ts={class:"stat-value"},Ls={class:"stat-card"},Ns={class:"stat-info"},Vs={class:"stat-value"},Ds={class:"stat-card"},Hs={class:"stat-info"},Es={class:"stat-value"},As={class:"section"},Gs={class:"stats-grid"},Ks={class:"stat-card total"},Ps={class:"stat-info"},$s={class:"stat-value"},Is={class:"stat-card total"},Qs={class:"stat-info"},Us={class:"stat-value"},js={class:"stat-card total"},Js={class:"stat-info"},Os={class:"stat-value"},Rs={class:"stat-card total"},Ws={class:"stat-info"},Xs={class:"stat-value"},Ys={class:"section"},Zs={class:"cards-grid two-col"},st={class:"detail-card"},tt={class:"card-body"},et={class:"detail-grid"},at={class:"detail-item"},lt={class:"detail-value"},ot={class:"detail-item"},it={class:"detail-value"},dt={class:"detail-item"},nt={class:"detail-value"},ct={class:"detail-item"},rt={class:"detail-value"},vt={class:"detail-card"},ut={class:"card-body"},_t={class:"detail-grid"},pt={class:"detail-item"},yt={class:"detail-value"},ht={class:"detail-item"},gt={class:"detail-value highlight"},ft={class:"detail-item"},xt={class:"detail-value"},mt={key:0,class:"badge success"},kt={key:1},bt={class:"detail-item"},wt={class:"detail-value"},Bt={class:"section"},Mt={class:"account-stats-grid"},Ct={class:"account-stat-card"},qt={class:"account-value"},Ft={class:"account-stat-card success"},St={class:"account-value"},zt={class:"account-stat-card warning"},Tt={class:"account-value"},Lt={class:"account-stat-card danger"},Nt={class:"account-value"},Vt={class:"section"},Dt={class:"resource-grid"},Ht={class:"resource-card"},Et={class:"resource-header"},At={class:"resource-badge"},Gt={class:"progress-container"},Kt={class:"resource-percent"},Pt={class:"resource-card"},$t={class:"resource-header"},It={class:"resource-badge"},Qt={class:"progress-container"},Ut={class:"resource-percent"},jt={class:"resource-detail"},Jt={class:"resource-card"},Ot={class:"resource-header"},Rt={class:"resource-badge"},Wt={class:"progress-container"},Xt={class:"resource-percent"},Yt={class:"resource-detail"},Zt={class:"section"},se={class:"cards-grid two-col"},te={class:"detail-card"},ee={class:"card-body"},ae={class:"detail-grid"},le={class:"detail-item"},oe={class:"detail-value"},ie={class:"detail-item"},de={class:"detail-value"},ne={class:"detail-item"},ce={class:"detail-value"},re={class:"detail-item"},ve={class:"detail-value"},ue={class:"detail-card"},_e={class:"card-header"},pe={class:"card-body"},ye={class:"detail-grid"},he={class:"detail-item"},ge={class:"detail-value"},fe={class:"detail-item"},xe={class:"detail-value"},me={class:"detail-item"},ke={class:"detail-value"},be={class:"detail-item"},we={class:"detail-value highlight"},Be={key:0,class:"update-time"},Me={__name:"SystemMonitor",setup(Ce){const r=vs(!1),e=vs({}),g=async()=>{r.value=!0;try{const l=await fs.getMonitorData();l.code===0?e.value=l.data:_s.error(l.message||"获取监控数据失败")}catch{_s.error("获取监控数据失败")}finally{r.value=!1}},o=(l,t=0)=>l==null?"0":t>0?l.toFixed(t):l.toLocaleString(),v=l=>l==null||l===0?"0":l>=1e9?(l/1e9).toFixed(2)+"B":l>=1e6?(l/1e6).toFixed(2)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toLocaleString(),i=l=>{if(!l||l===0)return"0 B";const t=1024,u=["B","KB","MB","GB","TB"],c=Math.floor(Math.log(l)/Math.log(t));return(l/Math.pow(t,c)).toFixed(2)+" "+u[c]},ps=l=>l?new Date(l).toLocaleString("zh-CN"):"",y=l=>l<60?"success":l<80?"warning":"danger";return hs(()=>{g()}),(l,t)=>{var u,c,f,x,m,k,b,w,B,M,C,q,F,S,z,T,L,N,V,D,H,E,A,G,K,P,$,I,Q,U,j,J,O,R,W,X,Y,Z,ss,ts,es,as,ls,os,is,ds,ns,cs,rs;return n(),d("div",xs,[s("div",ms,[t[3]||(t[3]=s("div",{class:"header-content"},[s("h1",{class:"page-title"},"系统监控"),s("p",{class:"page-subtitle"},"实时查看系统运行状态和资源使用情况")],-1)),s("button",{class:"btn btn-primary",onClick:g,disabled:r.value},[r.value?(n(),d("svg",bs,[...t[0]||(t[0]=[s("circle",{cx:"12",cy:"12",r:"10","stroke-opacity":"0.25"},null,-1),s("path",{d:"M12 2a10 10 0 019.95 9","stroke-linecap":"round"},null,-1)])])):(n(),d("svg",ws,[...t[1]||(t[1]=[s("polyline",{points:"23,4 23,10 17,10"},null,-1),s("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"},null,-1)])])),t[2]||(t[2]=us(" 刷新数据 ",-1))],8,ks)]),s("section",Bs,[t[12]||(t[12]=s("h2",{class:"section-title"},"今日使用",-1)),s("div",Ms,[s("div",Cs,[t[5]||(t[5]=s("div",{class:"stat-icon cost"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),s("path",{d:"M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})])],-1)),s("div",qs,[s("div",Fs,"$"+a(o(((u=e.value.today_usage)==null?void 0:u.total_cost)||0,4)),1),t[4]||(t[4]=s("div",{class:"stat-label"},"今日消费",-1))])]),s("div",Ss,[t[7]||(t[7]=s("div",{class:"stat-icon token"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("path",{d:"M12 6v6l4 2"})])],-1)),s("div",zs,[s("div",Ts,a(v(((c=e.value.today_usage)==null?void 0:c.total_tokens)||0)),1),t[6]||(t[6]=s("div",{class:"stat-label"},"今日 Token",-1))])]),s("div",Ls,[t[9]||(t[9]=s("div",{class:"stat-icon request"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12"})])],-1)),s("div",Ns,[s("div",Vs,a(o(((f=e.value.today_usage)==null?void 0:f.request_count)||0)),1),t[8]||(t[8]=s("div",{class:"stat-label"},"今日请求",-1))])]),s("div",Ds,[t[11]||(t[11]=_('<div class="stat-icon user" data-v-8d636f1e><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-8d636f1e><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" data-v-8d636f1e></path><circle cx="9" cy="7" r="4" data-v-8d636f1e></circle><path d="M23 21v-2a4 4 0 00-3-3.87" data-v-8d636f1e></path><path d="M16 3.13a4 4 0 010 7.75" data-v-8d636f1e></path></svg></div>',1)),s("div",Hs,[s("div",Es,a(((x=e.value.users)==null?void 0:x.active)||0),1),t[10]||(t[10]=s("div",{class:"stat-label"},"活跃用户",-1))])])])]),s("section",As,[t[21]||(t[21]=s("h2",{class:"section-title"},"累计统计",-1)),s("div",Gs,[s("div",Ks,[t[14]||(t[14]=s("div",{class:"stat-icon total-cost"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),s("line",{x1:"1",y1:"10",x2:"23",y2:"10"})])],-1)),s("div",Ps,[s("div",$s,"$"+a(o(((m=e.value.total_usage)==null?void 0:m.total_cost)||0,2)),1),t[13]||(t[13]=s("div",{class:"stat-label"},"总消费",-1))])]),s("div",Is,[t[16]||(t[16]=s("div",{class:"stat-icon total-token"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"})])],-1)),s("div",Qs,[s("div",Us,a(v(((k=e.value.total_usage)==null?void 0:k.total_tokens)||0)),1),t[15]||(t[15]=s("div",{class:"stat-label"},"总 Token",-1))])]),s("div",js,[t[18]||(t[18]=s("div",{class:"stat-icon total-request"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),s("polyline",{points:"22,4 12,14.01 9,11.01"})])],-1)),s("div",Js,[s("div",Os,a(v(((b=e.value.total_usage)==null?void 0:b.request_count)||0)),1),t[17]||(t[17]=s("div",{class:"stat-label"},"总请求",-1))])]),s("div",Rs,[t[20]||(t[20]=s("div",{class:"stat-icon total-cache"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})])],-1)),s("div",Ws,[s("div",Xs,a(v(((w=e.value.total_usage)==null?void 0:w.cache_creation_tokens)||0)),1),t[19]||(t[19]=s("div",{class:"stat-label"},"缓存创建",-1))])])])]),s("section",Ys,[s("div",Zs,[s("div",st,[t[26]||(t[26]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"Token 使用详情")],-1)),s("div",tt,[s("div",et,[s("div",at,[t[22]||(t[22]=s("span",{class:"detail-label"},"输入 Token",-1)),s("span",lt,a(o(((B=e.value.today_usage)==null?void 0:B.input_tokens)||0)),1)]),s("div",ot,[t[23]||(t[23]=s("span",{class:"detail-label"},"输出 Token",-1)),s("span",it,a(o(((M=e.value.today_usage)==null?void 0:M.output_tokens)||0)),1)]),s("div",dt,[t[24]||(t[24]=s("span",{class:"detail-label"},"缓存创建",-1)),s("span",nt,a(o(((C=e.value.today_usage)==null?void 0:C.cache_creation_tokens)||0)),1)]),s("div",ct,[t[25]||(t[25]=s("span",{class:"detail-label"},"缓存读取",-1)),s("span",rt,a(o(((q=e.value.today_usage)==null?void 0:q.cache_read_tokens)||0)),1)])])])]),s("div",vt,[t[31]||(t[31]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"用户统计")],-1)),s("div",ut,[s("div",_t,[s("div",pt,[t[27]||(t[27]=s("span",{class:"detail-label"},"总用户数",-1)),s("span",yt,a(((F=e.value.users)==null?void 0:F.total)||0),1)]),s("div",ht,[t[28]||(t[28]=s("span",{class:"detail-label"},"今日活跃",-1)),s("span",gt,a(((S=e.value.users)==null?void 0:S.active)||0),1)]),s("div",ft,[t[29]||(t[29]=s("span",{class:"detail-label"},"今日新增",-1)),s("span",xt,[((z=e.value.users)==null?void 0:z.new_today)>0?(n(),d("span",mt,"+"+a((T=e.value.users)==null?void 0:T.new_today),1)):(n(),d("span",kt,"0"))])]),s("div",bt,[t[30]||(t[30]=s("span",{class:"detail-label"},"活跃率",-1)),s("span",wt,a(((L=e.value.users)==null?void 0:L.total)>0?(((N=e.value.users)==null?void 0:N.active)/((V=e.value.users)==null?void 0:V.total)*100).toFixed(1):0)+"%",1)])])])])])]),s("section",Bt,[t[39]||(t[39]=s("h2",{class:"section-title"},"账号状态",-1)),s("div",Mt,[s("div",Ct,[s("div",qt,a(((D=e.value.accounts)==null?void 0:D.total)||0),1),t[32]||(t[32]=s("div",{class:"account-label"},"总账号",-1))]),s("div",Ft,[s("div",St,a(((H=e.value.accounts)==null?void 0:H.active)||0),1),t[33]||(t[33]=s("div",{class:"account-label"},"正常可用",-1)),t[34]||(t[34]=s("div",{class:"account-indicator"},null,-1))]),s("div",zt,[s("div",Tt,a(((E=e.value.accounts)==null?void 0:E.rate_limited)||0),1),t[35]||(t[35]=s("div",{class:"account-label"},"限流中",-1)),t[36]||(t[36]=s("div",{class:"account-indicator"},null,-1))]),s("div",Lt,[s("div",Nt,a(((A=e.value.accounts)==null?void 0:A.invalid)||0),1),t[37]||(t[37]=s("div",{class:"account-label"},"无效/禁用",-1)),t[38]||(t[38]=s("div",{class:"account-indicator"},null,-1))])])]),s("section",Vt,[t[43]||(t[43]=s("h2",{class:"section-title"},"系统资源",-1)),s("div",Dt,[s("div",Ht,[s("div",Et,[t[40]||(t[40]=_('<div class="resource-title" data-v-8d636f1e><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-8d636f1e><rect x="4" y="4" width="16" height="16" rx="2" ry="2" data-v-8d636f1e></rect><rect x="9" y="9" width="6" height="6" data-v-8d636f1e></rect><line x1="9" y1="1" x2="9" y2="4" data-v-8d636f1e></line><line x1="15" y1="1" x2="15" y2="4" data-v-8d636f1e></line><line x1="9" y1="20" x2="9" y2="23" data-v-8d636f1e></line><line x1="15" y1="20" x2="15" y2="23" data-v-8d636f1e></line><line x1="20" y1="9" x2="23" y2="9" data-v-8d636f1e></line><line x1="20" y1="14" x2="23" y2="14" data-v-8d636f1e></line><line x1="1" y1="9" x2="4" y2="9" data-v-8d636f1e></line><line x1="1" y1="14" x2="4" y2="14" data-v-8d636f1e></line></svg><span data-v-8d636f1e>CPU</span></div>',1)),s("span",At,a(((G=e.value.system)==null?void 0:G.cpu_cores)||0)+" 核",1)]),s("div",Gt,[s("div",{class:p(["progress-bar",y((K=e.value.system)==null?void 0:K.cpu_usage)]),style:h({width:(((P=e.value.system)==null?void 0:P.cpu_usage)||0)+"%"})},null,6)]),s("div",Kt,a(((($=e.value.system)==null?void 0:$.cpu_usage)||0).toFixed(1))+"%",1)]),s("div",Pt,[s("div",$t,[t[41]||(t[41]=_('<div class="resource-title" data-v-8d636f1e><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-8d636f1e><rect x="2" y="6" width="20" height="12" rx="2" data-v-8d636f1e></rect><line x1="6" y1="10" x2="6" y2="14" data-v-8d636f1e></line><line x1="10" y1="10" x2="10" y2="14" data-v-8d636f1e></line><line x1="14" y1="10" x2="14" y2="14" data-v-8d636f1e></line><line x1="18" y1="10" x2="18" y2="14" data-v-8d636f1e></line></svg><span data-v-8d636f1e>内存</span></div>',1)),s("span",It,a(i((I=e.value.system)==null?void 0:I.memory_total)),1)]),s("div",Qt,[s("div",{class:p(["progress-bar",y((Q=e.value.system)==null?void 0:Q.memory_usage)]),style:h({width:(((U=e.value.system)==null?void 0:U.memory_usage)||0)+"%"})},null,6)]),s("div",Ut,a((((j=e.value.system)==null?void 0:j.memory_usage)||0).toFixed(1))+"%",1),s("div",jt," 已用 "+a(i((J=e.value.system)==null?void 0:J.memory_used))+" / 可用 "+a(i((O=e.value.system)==null?void 0:O.memory_free)),1)]),s("div",Jt,[s("div",Ot,[t[42]||(t[42]=_('<div class="resource-title" data-v-8d636f1e><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-8d636f1e><ellipse cx="12" cy="5" rx="9" ry="3" data-v-8d636f1e></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" data-v-8d636f1e></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" data-v-8d636f1e></path></svg><span data-v-8d636f1e>磁盘</span></div>',1)),s("span",Rt,a(i((R=e.value.system)==null?void 0:R.disk_total)),1)]),s("div",Wt,[s("div",{class:p(["progress-bar",y((W=e.value.system)==null?void 0:W.disk_usage)]),style:h({width:(((X=e.value.system)==null?void 0:X.disk_usage)||0)+"%"})},null,6)]),s("div",Xt,a((((Y=e.value.system)==null?void 0:Y.disk_usage)||0).toFixed(1))+"%",1),s("div",Yt," 已用 "+a(i((Z=e.value.system)==null?void 0:Z.disk_used))+" / 可用 "+a(i((ss=e.value.system)==null?void 0:ss.disk_free)),1)])])]),s("section",Zt,[s("div",se,[s("div",te,[t[48]||(t[48]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"内存缓存"),s("span",{class:"status-badge success"},"运行中")],-1)),s("div",ee,[s("div",ae,[s("div",le,[t[44]||(t[44]=s("span",{class:"detail-label"},"会话绑定数",-1)),s("span",oe,a(o(((ts=e.value.cache)==null?void 0:ts.session_count)||0)),1)]),s("div",ie,[t[45]||(t[45]=s("span",{class:"detail-label"},"账户并发数",-1)),s("span",de,a(o(((es=e.value.cache)==null?void 0:es.account_concurrency_count)||0)),1)]),s("div",ne,[t[46]||(t[46]=s("span",{class:"detail-label"},"用户并发数",-1)),s("span",ce,a(o(((as=e.value.cache)==null?void 0:as.user_concurrency_count)||0)),1)]),s("div",re,[t[47]||(t[47]=s("span",{class:"detail-label"},"不可用标记",-1)),s("span",ve,a(o(((ls=e.value.cache)==null?void 0:ls.unavailable_count)||0)),1)])])])]),s("div",ue,[s("div",_e,[t[49]||(t[49]=s("h3",{class:"card-title"},"MySQL",-1)),s("span",{class:p(["status-badge",(os=e.value.mysql)!=null&&os.connected?"success":"danger"])},a((is=e.value.mysql)!=null&&is.connected?"已连接":"未连接"),3)]),s("div",pe,[s("div",ye,[s("div",he,[t[50]||(t[50]=s("span",{class:"detail-label"},"表数量",-1)),s("span",ge,a(((ds=e.value.mysql)==null?void 0:ds.table_count)||0),1)]),s("div",fe,[t[51]||(t[51]=s("span",{class:"detail-label"},"数据大小",-1)),s("span",xe,a(i((ns=e.value.mysql)==null?void 0:ns.data_size)),1)]),s("div",me,[t[52]||(t[52]=s("span",{class:"detail-label"},"索引大小",-1)),s("span",ke,a(i((cs=e.value.mysql)==null?void 0:cs.index_size)),1)]),s("div",be,[t[53]||(t[53]=s("span",{class:"detail-label"},"总大小",-1)),s("span",we,a(i((rs=e.value.mysql)==null?void 0:rs.total_size)),1)])])])])])]),e.value.updated_at?(n(),d("div",Be,[t[54]||(t[54]=s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("polyline",{points:"12,6 12,12 16,14"})],-1)),us(" 最后更新: "+a(ps(e.value.updated_at)),1)])):gs("",!0)])}}},Fe=ys(Me,[["__scopeId","data-v-8d636f1e"]]);export{Fe as default};
